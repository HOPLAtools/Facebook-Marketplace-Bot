// ==UserScript==
// @name         Facebook Phones.Trade Bot
// @namespace    http://tampermonkey.net/
// @version      2.03
// @description  try to take over the world!
// @author       You
// @match        https://www.facebook.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=facebook.com
// @grant        GM.getValue
// @grant        GM.setValue
// @grant        GM_addElement
// @grant        GM_addStyle
// @run-at document-end
// @sandbox DOM
// @require https://code.getmdl.io/1.3.0/material.min.js
// @require https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js
// @require https://cdnjs.cloudflare.com/ajax/libs/dialog-polyfill/0.5.6/dialog-polyfill.min.js
// @require https://cdn.trackjs.com/agent/v3/latest/t.js
// @require https://login.hopla.to/js/hopla-login.js
// ==/UserScript==

(function() {
  'use strict';
// https://raw.githubusercontent.com/HOPLAtools/Facebook-Marketplace-Bot/main/index.js ;
  
/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={4087:(e,t,n)=>{"use strict";n.r(t),n.d(t,{api_search:()=>d,api_sendMessage:()=>c});var i=n(1203),o=n(3539),s=n(5703),a=n(8544),r=n(2287),l=n(4246);async function c(e,t){const n=(0,s.W)(),d=await fetch("https://www.facebook.com/api/graphql/",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","cache-control":"no-cache","content-type":"application/x-www-form-urlencoded",pragma:"no-cache","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":"CometMarketplaceMessageSellerMutation","x-fb-lsd":"eGdwssYEVXB7hv3L3hNExb"},referrer:`https://www.facebook.com/marketplace/item/${e}/?ref=browse_tab&referral_code=marketplace_top_picks&referral_story_type=top_picks`,referrerPolicy:"strict-origin-when-cross-origin",body:`av=${n}&__user=${n}&__a=1&__req=w&__hs=19538.HYP%3Acomet_pkg.2.1..2.1&dpr=2&__ccg=GOOD&__rev=1007773680&__s=pz5dko%3Au0mc7e%3Aeov58w&__hsi=7250295222789373259&__dyn=7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2CE4ibyQdwSAxacyUco5S3O2Saw8i2S1DwUx60GE3Qwb-q7oc81xoswIK1Rwwwg8a8465o-cw5Mx62G5Usw9m1YwBgK7o884y0Mo4G4UcUC7Udo5qfK0zEkxe2GewyDwkUtxGm2SUbElxm3y3aexfxmu3W3y261eBx_y88E3qxWm2Sq2-azo7u3C223908O321LwTwNxe6Uak1xwJwxyo6O1Fw&__csr=gL15aAxKBbb6JOO9iH4nR6Rbth1cOT9czcPOvjXldQQTTbF9OPn4qhfsHVuHiOr8AVqHCCG-FsC8CaVdfZVq8FaHhFe-aBZ4-O7ighK5FF-QEqm8y9EgVoKtoSVUJ4gR7Az4icAjghzaBxa9xi6o--u4UsWAyoOfKfwACxR1e9z8WbK1dAxqUG5UOcy8GUipGDCG2bxdem6S3e5EqxGdzElUy5VpFoKexO3SqfwWCz89qwg82gwyGu4k5ofUcoarwtUW7VoWawspEWVojxa6ofotw0Jnw0D8w0gO401VrDwea02WK0qO0xE2Ww1Mqu0yo8FEuBgnwbfway1Nw-wJw0Nkw0FsggwBw1360eIoS0RU2Qw7EwKDg0bDA06EqwSw6AhFd0FQi0q92oqA84IM5S0pa0tuu0ii0ehUfo&__comet_req=15&fb_dtsg=${(0,a.getFb_dtsg)()}&jazoest=25701&lsd=eGdwssYEVXB7hv3L3hNExb&__spin_r=1007773680&__spin_b=trunk&__spin_t=1688090903&fb_api_caller_class=RelayModern&fb_api_req_friendly_name=CometMarketplaceMessageSellerMutation&variables=%7B%22input%22%3A%7B%22attribution_id_v2%22%3A%22CometMarketplaceHoistedPermalinkContentContainer.react%2Ccomet.marketplace.item%2Cvia_cold_start%2C1688090903780%2C951%2C1606854132932955%2C%22%2C%22listing_id%22%3A%22${e}%22%2C%22message%22%3A%22${t}%22%2C%22referral_surface%22%3A%22browse_tab%22%2C%22surface%22%3A%22product_details%22%2C%22tracking%22%3Anull%2C%22ui_component%22%3A%22contact_seller_button%22%2C%22actor_id%22%3A%22100023618722690%22%2C%22client_mutation_id%22%3A%222%22%7D%7D&server_timestamps=true&doc_id=4861194384003324`,method:"POST",mode:"cors",credentials:"include"}).then((async e=>(0,r.handleFetchErrors)(e))).then((e=>e.text()));if(d&&d.match(/api_error_code":368/i)){const n=(new Date).getTime()+60*i.waitIfSpamDetected*1e3,s=moment(n).calendar();return(0,o.CONSOLE_MESSAGE)("halted_soft",{schedule:s}),window.isKO=!0,await(0,l.sleep)(60*i.waitIfSpamDetected*1e3),window.isKO=!1,await c(e,t)}if(d&&d.match(/error/i))return{error:d};let u;try{u=d.match(/thread_id":"(\d+)"/i)[1]}catch(e){console.error("Failed to get thread_id",d)}const p={success:!0};return u&&(p.thread_id=u),p}async function d({keyword:e,lat:t=7.79716,long:n=122.763,radius:i=65,count:a=24}){const c={buyLocation:{latitude:t,longitude:n},contextual_data:null,count:24,cursor:null,flashSaleEventID:"",hasFlashSaleEventID:!1,marketplaceSearchMetadataCardEnabled:!1,params:{bqf:{callsite:"COMMERCE_MKTPLACE_WWW",query:e},browse_request_params:{commerce_enable_local_pickup:!0,commerce_enable_shipping:!0,commerce_search_and_rp_available:!0,commerce_search_and_rp_category_id:[],commerce_search_and_rp_condition:null,commerce_search_and_rp_ctime_days:null,filter_location_latitude:t,filter_location_longitude:n,filter_price_lower_bound:0,filter_price_upper_bound:214748364700,filter_radius_km:i},custom_request_params:{browse_context:null,contextual_filters:[],referral_code:null,saved_search_strid:null,search_vertical:"C2C",seo_url:null,surface:"SEARCH",virtual_contextual_filters:[]}},savedSearchID:null,savedSearchQuery:e,scale:2,shouldIncludePopularSearches:!1},p=(0,s.W)(),m={av:p,__user:p,__a:"1",__req:"1y",__hs:"19538.HYP:comet_pkg.2.1..2.1",dpr:"2",__ccg:"GOOD",__rev:"1007776100",__s:"5quzjd:u0mc7e:7xf1x9",__hsi:"7250391670970196399",__dyn:"7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2C17yUJ3odEnz8K361twYwJyE24wJwpUe8hwaG0Z82_CxS320om78bbwto88422y11xmfz81s8hwGxu782lwv89kbxS2218wc61axe3S7Udo5qfK0zEkxe2GewyDwkUtxGm2SUbElxm3y3aexfxmu3W3y261eBx_y88E3qxWm2Sq2-azo7u3C223908O3216xi4UdUcojxK2B0oobo8oC1Iwqo",__csr:"ghjgDdsIl5h7REr69Wj4hcA8JlGgAZ8yGOAIBsiZKy8IGchYhc-h4AQ-SKCWjQHiFb9Di-D9GQqiWOfQA-DqAFpV8PoG-4rVAaUFKuQmXKiWho-5qxamqi4EF2fDDjAzUKpoKvxa8VoOcBzUhwWheaS7oS2uay9onAwRwwxuuewOxq5GyovAxe9yUD-58qxacxe2ieK9wNz98jy9oqzohDKE7y5E4W3u2R0UxO3a3PxidwSwZwIwGwh9Ehxq2O3a5UmwpEKewVw09yt00Tig04iO02WS0o-0G82Lw1LC5U2hwhFA0pS1xwnE5a01Gww3NO072w7cgmU0bvFU0rNzo1C9Z0PWQi0qy4lA9mEK1Fw73w4mQ0Nk0To0ZF0",__comet_req:"15",fb_dtsg:"NAcO1KsFTdHd-D4iLqt4IgugVzA01qlAIoSoHyEaLGNXjQzvYYThG9A:29:1688000622",jazoest:"25437",lsd:"IudQ3V8x_C_Vv_XEg-5tyu",__spin_r:"1007776100",__spin_b:"trunk",__spin_t:"1688113359",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"CometMarketplaceSearchContentContainerQuery",variables:JSON.stringify(c),server_timestamps:"true",doc_id:"6555223147833946"};let g=await fetch("https://www.facebook.com/api/graphql/",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":"CometMarketplaceSearchContentContainerQuery","x-fb-lsd":"IudQ3V8x_C_Vv_XEg-5tyu"},referrer:"https://www.facebook.com/marketplace/110301228992872/search?query=rice",referrerPolicy:"strict-origin-when-cross-origin",body:u(m),method:"POST",mode:"cors",credentials:"include"}).then((async e=>(0,r.handleFetchErrors)(e))).then((e=>e.json()));const _=JSON.stringify(g);return _&&_.match(/api_error_code":368/i)?((0,o.CONSOLE_MESSAGE)("custom","Rate limit exceeded. Waiting for 1 hour."),await(0,l.sleep)(36e5),d({keyword:e,lat:t,long:n,radius:i,count:a})):g.data.marketplace_search.feed_units.edges.map((e=>{const t=e.node.listing;return{title:t.marketplace_listing_title,price:t.listing_price.formatted_amount,id:t.id,seller:t.marketplace_listing_seller}}))}function u(e){const t=[];for(let n in e)if(e.hasOwnProperty(n)){const i=encodeURIComponent(n),o=encodeURIComponent(e[n]);t.push(`${i}=${o}`)}return t.join("&")}},4484:(e,t,n)=>{"use strict";n.r(t),n.d(t,{_apiSendBug:()=>a});var i=n(2617),o=n(2287),s=n(4246);function a(e){const t=(new Date).getTime();e.log_id=t;try{e.email||(e.email=(0,i.g)())}catch(e){console.error("failed to add email to log.")}return window.tabId&&(e.tabId=window.tabId),window.taEmail&&(e.partner_email=window.taEmail),e.extension_version=window.extension_version,async function t(n){return fetch("https://webhook.hopla.workers.dev/offerupbot?project=OfferUpBot",{method:"POST",body:JSON.stringify(e),mode:"no-cors"}).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text())).catch((async e=>(console.error("Fetch Failed (_apiSendBug)",e,n),n&&n>6?"":(await(0,s.sleep)(1e4),n||(n=0),t(n+=1)))))}().catch((e=>(console.error("Fetch Failed (_apiSendBug)",e),"")))}},9088:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addAllUserListingsToSkipList:()=>s});var i=n(3539),o=n(8521);async function s(e,t,n){if(n){const s=n.filter((e=>e.id)).map((e=>e.id));return(0,i.CONSOLE_MESSAGE)("custom",`Adding ${s.length} listings of ${t} (${e}) to skip list.`),(0,o.skips)().saveToSkipListingBatch(s)}}},2e3:(e,t,n)=>{"use strict";n.r(t),n.d(t,{promptarchive:()=>s});var i=n(175),o=n(3542);async function s(){"ARCHIVE"===prompt("Are you sure you want to archive all read threads in your marketplace inbox? Type ARCHIVE to confirm:")&&(CONSOLE_MESSAGE("custom","Archiving read threads..."),async function(){const e=await(0,o.fetchInboxThreads)();for(const t of e){const e=t&&t.thread_key&&t.thread_key.thread_fbid;if(e){if(t.unread_count>0){console.log("threadid",e,"has unread messages",t.unread_count);continue}await(0,i.changeArchivedStatus)(e,!0)}}CONSOLE_MESSAGE("custom","All read threads has been successfully archived.")}())}},1284:(e,t,n)=>{"use strict";n.r(t),n.d(t,{attachEvents:()=>g});var i=n(2e3);function o(e){const t=e.target.textContent;if(window.lastInputId){const e=document.getElementById(window.lastInputId[0]);let n=e.value;n=[n.slice(0,window.lastInputId[1]),t,n.slice(window.lastInputId[1])].join(""),e.value=n,e.parentNode.classList.add("is-focused"),e.focus();const i=window.lastInputId[1]+t.length;e.setSelectionRange(i,i)}}var s=n(9485),a=n(3539);async function r(){"LISTINGS"===prompt("Are you sure you want to purge your listings skip list? Type LISTINGS to confirm:")&&((0,a.CONSOLE_MESSAGE)("custom","Purging listings..."),async function(){let e="listings";"single"===document.querySelector("[name=bot_mode]:checked").value||(e="listings_multi");const t=await fetch(`https://us-central1-trade-apples.cloudfunctions.net/facebookbot?purge=1&listname=${e}&partnerid=${window.taPartnerId}`).then((e=>e.json()));t.success?(0,a.CONSOLE_MESSAGE)("custom","Listings has been successfully purged."):(console.error("Failed to purge listings.",t),(0,a.CONSOLE_MESSAGE)("custom","Failed to purge listings."))}())}async function l(){"OWNERS"===prompt("Are you sure you want to purge your owners skip list? Type OWNERS to confirm:")&&((0,a.CONSOLE_MESSAGE)("custom","Purging owners..."),async function(){const e=await fetch(`https://us-central1-trade-apples.cloudfunctions.net/facebookbot?purge=1&listname=users&partnerid=${window.taPartnerId}`).then((e=>e.json()));e.success?(0,a.CONSOLE_MESSAGE)("custom","Owners has been successfully purged."):(console.error("Failed to purge owners.",e),(0,a.CONSOLE_MESSAGE)("custom","Failed to purge owners."))}())}var c=n(1334),d=n(9971),u=n(4423);async function p(e){const t=e.target.id;if(t)if("radio"===e.target.type){const n=e.target.name;(0,c.Q5)(`radio_${n}`,t)}else"checkbox"===e.target.type?((0,c.Q5)(`input_${t}`,e.target.checked),"switch-rununtil"===t&&e.target.checked?(0,d.O)():(unsafeWindow.isRun=0,delete unsafeWindow.runningInstanceId,(0,u.o)(!0))):(0,c.Q5)(`input_${t}`,e.target.value)}var m=n(7121);function g(){document.querySelector("#roundupdown").addEventListener("change",p),document.querySelector("#streak").addEventListener("change",p),document.querySelector("#streaktimeout").addEventListener("change",p),document.querySelector("#maxconcurrentconversations").addEventListener("change",p),document.querySelector("#keywords").addEventListener("change",p),document.querySelector("#keywords").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#skipwords_title").addEventListener("change",p),document.querySelector("#skipwords_title").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#skipwords_description").addEventListener("change",p),document.querySelector("#skipwords_description").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#coordinates").addEventListener("change",p),document.querySelector("#coordinates").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#radius").addEventListener("change",p),document.querySelector("#radius").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#openermessage").addEventListener("change",p),document.querySelector("#openermessage").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#gbmessage").addEventListener("change",p),document.querySelector("#gbmessage").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#networkmessage").addEventListener("change",p),document.querySelector("#networkmessage").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#offermessage").addEventListener("change",p),document.querySelector("#offermessage").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#lowball_message").addEventListener("change",p),document.querySelector("#lowball_message").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#question_1").addEventListener("change",p),document.querySelector("#question_1").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#question_2").addEventListener("change",p),document.querySelector("#question_2").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#question_3").addEventListener("change",p),document.querySelector("#question_3").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#question_4").addEventListener("change",p),document.querySelector("#question_4").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#listing_min_price").addEventListener("change",p),document.querySelector("#listing_min_price").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#listing_max_price").addEventListener("change",p),document.querySelector("#listing_max_price").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#listing_price_delta").addEventListener("change",p),document.querySelector("#listing_price_delta").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#custom_price_delta").addEventListener("change",p),document.querySelector("#custom_price_delta").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#listing_max_age").addEventListener("change",p),document.querySelector("#listing_max_age").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#switch-continue_after_storage").addEventListener("change",p),document.querySelector("#switch-continue_after_network").addEventListener("change",p),document.querySelector("#meetupmessage").addEventListener("change",p),document.querySelector("#meetupmessage").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#partnermessage").addEventListener("change",p),document.querySelector("#partnermessage").addEventListener("blur",(e=>{window.lastInputId=[e.target.id,e.target.selectionStart]})),document.querySelector("#runfrom").addEventListener("change",p),document.querySelector("#rununtil").addEventListener("change",p),document.querySelector("#switch-deleteaftersend").addEventListener("change",p),document.querySelector("#switch-rununtil").addEventListener("change",p),document.querySelector("#switch-rununtil").addEventListener("change",(()=>{(0,m.X)(!document.querySelector("#switch-rununtil").checked)})),document.querySelectorAll("#ta .variables .variable").forEach((e=>e.addEventListener("click",o))),document.querySelector("#ta #test_template").addEventListener("click",window.testTemplates),document.querySelector("#ta #restore_defaults").addEventListener("click",unsafeWindow.restoreDefaults),document.querySelector("#purge_listings").addEventListener("click",r),document.querySelector("#purge_owners").addEventListener("click",l),document.querySelector("#archive_all_threads").addEventListener("click",i.promptarchive),document.querySelector("#mode_single").addEventListener("change",p),document.querySelector("#mode_multi").addEventListener("change",p),document.querySelector("#ta_maximize").addEventListener("click",s.E)}},175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{changeArchivedStatus:()=>s});var i=n(5703),o=n(5078);async function s(e,t){if(!e)return{error:"threadId is required"};void 0===t&&(t=!0),window.global||(window.global={}),window.global.reqCounter||(window.global.reqCounter=0);const n=function(){const e=document.body.outerHTML.match(/"fb_dtsg","value":"(.+?)"/);return e&&e.length>1?e[1]:(0,o.getFrom)(document.body.outerHTML,'DTSGInitialData":{"token":"','"')||""}(),s=(0,o.getFrom)(document.body.outerHTML,'revision":',",");for(var r="2",l=0;l<n.length;l++)r+=n.charCodeAt(l);const c=(0,o.getFrom)(document.body.outerHTML,'["LSD",[],{"token":"','"}'),d="ids["+e+"]",u=(0,i.W)(),p={av:u,__user:u,__a:"1",__req:(window.global.reqCounter++).toString(36),__hs:"19541.HYP:comet_pkg.2.1..2.1",dpr:"2",__ccg:"GOOD",__rev:`${s}`,__s:"r7e81o:lrt2ad:isoco8",__hsi:"7251558458098997704",__dyn:"7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2C17yUJ3odEnz8K2aewnof8boG0x8bo6u3y4o2Gwfi0LVEtwMw65xO2OU7m2210wEwgolzUO0-E4a3a4oaEnxO0Bo7O2l2Utwwwi831wiEjwZx-3m1mzXw8W58jwGzE8FU5e7oqBwJK2W5olwUwOzEjUlDw-wQK261eBx_y88E3qxWm2Sq2-azo7u3C223908O3216xi4UdUcojxK2B0oobo8oC1hxG1Fw",__csr:"g9Ahf9sGvRRfitNb4HbYZWGGrmxGNIjiq8IgkBbsPYJlWOQP4rEzKGRh6QYx6FlFyQHXAGRry-iBAXh27t6t4mVaigiAh9ULpfCGeVK-uqil4BVF68UZ2QAECeDVy-iaBVVbKWBUKm8iByUvKElhu46cyoybGbyomwxJ93Hz8pzoy4Q4e5aKazEDgK2S9AABx626mUThEap8pCxaqeAhUjyk5Z0zyESdwqqye8KmEKu5UnHwHx-1cKE4O2qUqgjzEqK364UvxO2e2W7U-1gxqVXx29DwZxiawnUcEjxO00BAE2Vg07KK031W2i0nO0yE2HU0obCg6m1Cx-0PQ0XA2-0hm1cwGw0GLqx500LThFU0_60f5x51i0pm0muOwmU-051A07rA04c86S0hEHDwgU1TQqjglwjA1FpU3oQ7iqh2a1HwNw44g2gwb60iTwd-0f9x90",__comet_req:"15",fb_dtsg:n,jazoest:r,lsd:c,server_timestamps:"true",[d]:t};let m=await fetch("https://www.facebook.com/ajax/mercury/change_archived_status.php",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":"CometMarketplaceSearchContentContainerQuery","x-fb-lsd":"IudQ3V8x_C_Vv_XEg-5tyu"},referrer:"https://www.facebook.com/marketplace/110301228992872/search?query=rice",referrerPolicy:"strict-origin-when-cross-origin",body:a(p),method:"POST",mode:"cors",credentials:"include",connection:"keep-alive"}).then((e=>e.text()));return m.match(/server_change_archived_status/i)?{success:!0}:(console.log("results",m),{error:"Failed to archive thread",response:m})}function a(e){const t=[];for(let n in e)if(e.hasOwnProperty(n)){const i=encodeURIComponent(n),o=encodeURIComponent(e[n]);t.push(`${i}=${o}`)}return t.join("&")}},1334:(e,t,n)=>{"use strict";async function i(e){return GM.getValue(e)}async function o(e,t){return GM.setValue(e,t)}async function s(e){return GM.deleteValue(e)}async function a(){return await GM.listValues()}n.d(t,{FF:()=>a,Q5:()=>o,aD:()=>s,gI:()=>i})},1203:(e,t,n)=>{"use strict";n.r(t),n.d(t,{botRetryDelay:()=>m,debug_disableMessages:()=>l,delayPerXMessages:()=>u,disableLogs:()=>c,intervalConversationsCheck:()=>s,listingsPerKeyword:()=>o,maxItemsToOfferPartner:()=>a,messageDelay:()=>d,sheet_id:()=>g,showAlerts:()=>r,userDelay:()=>p,waitIfSpamDetected:()=>i});const i=1440,o=120,s=120,a=3,r=!1,l=!1,c=!1,d=[3,10],u=10,p=[300,900],m=[50,70],g="1a6324ea456c27346230df0a70458cc9"},13:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fetchListingDetails:()=>d});var i=n(1203),o=n(3539),s=n(5703),a=n(2287),r=n(4246),l=n(7367),c=n(5078);async function d({id:e}){window.global||(window.global={}),window.global.reqCounter||(window.global.reqCounter=0);const t={UFI2CommentsProvider_commentsKey:"MarketplacePDP",feedbackSource:56,feedLocation:"MARKETPLACE_MEGAMALL",referralCode:"null",scale:2,should_show_new_pdp:!1,targetId:String(e),useDefaultActor:!1},n=function(){const e=document.body.outerHTML.match(/"fb_dtsg","value":"(.+?)"/);return e&&e.length>1?e[1]:(0,c.getFrom)(document.body.outerHTML,'DTSGInitialData":{"token":"','"')||""}(),d=(0,c.getFrom)(document.body.outerHTML,'revision":',",");for(var p="2",m=0;m<n.length;m++)p+=n.charCodeAt(m);const g=(0,s.W)(),_={av:g,__user:g,__a:"1",__req:(window.global.reqCounter++).toString(36),__hs:"19541.HYP:comet_pkg.2.1..2.1",dpr:"2",__ccg:"GOOD",__rev:`${d}`,__s:"r7e81o:lrt2ad:isoco8",__hsi:"7251558458098997704",__dyn:"7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2C17yUJ3odEnz8K2aewnof8boG0x8bo6u3y4o2Gwfi0LVEtwMw65xO2OU7m2210wEwgolzUO0-E4a3a4oaEnxO0Bo7O2l2Utwwwi831wiEjwZx-3m1mzXw8W58jwGzE8FU5e7oqBwJK2W5olwUwOzEjUlDw-wQK261eBx_y88E3qxWm2Sq2-azo7u3C223908O3216xi4UdUcojxK2B0oobo8oC1hxG1Fw",__csr:"g9Ahf9sGvRRfitNb4HbYZWGGrmxGNIjiq8IgkBbsPYJlWOQP4rEzKGRh6QYx6FlFyQHXAGRry-iBAXh27t6t4mVaigiAh9ULpfCGeVK-uqil4BVF68UZ2QAECeDVy-iaBVVbKWBUKm8iByUvKElhu46cyoybGbyomwxJ93Hz8pzoy4Q4e5aKazEDgK2S9AABx626mUThEap8pCxaqeAhUjyk5Z0zyESdwqqye8KmEKu5UnHwHx-1cKE4O2qUqgjzEqK364UvxO2e2W7U-1gxqVXx29DwZxiawnUcEjxO00BAE2Vg07KK031W2i0nO0yE2HU0obCg6m1Cx-0PQ0XA2-0hm1cwGw0GLqx500LThFU0_60f5x51i0pm0muOwmU-051A07rA04c86S0hEHDwgU1TQqjglwjA1FpU3oQ7iqh2a1HwNw44g2gwb60iTwd-0f9x90",__comet_req:"15",fb_dtsg:n,jazoest:p,lsd:"VSZVwWRyifaM82K_F8cOFc",__spin_r:"1007782503",__spin_b:"trunk",__spin_t:"1688385023",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"CometMarketplaceSearchContentContainerQuery",variables:JSON.stringify(t),server_timestamps:"true",doc_id:"6019983858113356"};let w=await fetch("https://www.facebook.com/api/graphql/",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":"CometMarketplaceSearchContentContainerQuery","x-fb-lsd":"IudQ3V8x_C_Vv_XEg-5tyu"},referrer:"https://www.facebook.com/marketplace/110301228992872/search?query=rice",referrerPolicy:"strict-origin-when-cross-origin",body:u(_),method:"POST",mode:"cors",credentials:"include"}).then((async e=>(0,a.handleFetchErrors)(e))).then((e=>e.json()));const h=JSON.stringify(w);if(h&&h.match(/api_error_code":368/i)){const e=(new Date).getTime()+60*i.waitIfSpamDetected*1e3,t=moment(e).calendar();return(0,o.CONSOLE_MESSAGE)("halted_soft",{schedule:t}),window.isKO=!0,await(0,r.sleep)(60*i.waitIfSpamDetected*1e3),window.isKO=!1,{error:"Rate limit exceeded",error_code:"rate_limit_exceeded"}}const f={};if(w&&w.data&&w.data.viewer&&w.data.viewer.marketplace_product_details_page){const e=w.data.viewer.marketplace_product_details_page.target.id,t=w.data.viewer.marketplace_product_details_page.target.marketplace_listing_title,n=w.data.viewer.marketplace_product_details_page.target.redacted_description.text,i=w.data.viewer.marketplace_product_details_page.target.listing_price.amount,o=w.data.viewer.marketplace_product_details_page.target.marketplace_listing_seller,s=w.data.viewer.marketplace_product_details_page.target.creation_time,a=w.data.viewer.marketplace_product_details_page.target.attribute_data;if(a){const e=a.find((e=>"Condition"===e.attribute_name));e&&(f.condition=e.value)}e&&(f.id=e),t&&(f.title=t),n&&(f.description=n),i&&(f.price=i),o&&(f.seller=o),s&&(f.creationTime=1e3*s,f.age=Date.now()-f.creationTime)}if(0===Object.keys(f).length){if(w.errors&&Array.isArray(w.errors))if(w.errors.length>0){if(console.log("Error",w.errors[0]),368===w.errors[0].api_error_code)return(await(0,l.stats)()).addKo(),console.log("Rate limit exceeded"),{error:"Rate limit exceeded",error_code:"rate_limit_exceeded"}}else console.log("No errors",e,w);console.log("No results",e,w)}return f}function u(e){const t=[];for(let n in e)if(e.hasOwnProperty(n)){const i=encodeURIComponent(n),o=encodeURIComponent(e[n]);t.push(`${i}=${o}`)}return t.join("&")}},6901:(e,t,n)=>{"use strict";n.r(t),n.d(t,{filterOutListingsNotInPriceRange:()=>o,isPriceInRange:()=>s});var i=n(3539);function o(e){let t=Number(document.querySelector("#listing_min_price").value)||0,n=Number(document.querySelector("#listing_max_price").value)||0;if(0===t&&0===n)return e;const o=e.length,s=(e=e.filter((e=>{let i=e.price;return"string"==typeof i&&(i=Number(i.replace(/[^0-9\.]+/g,""))),i>=t&&i<=n}))).length;return s!==o&&(0,i.CONSOLE_MESSAGE)("price_not_inrange",{num_listings:o-s}),e}function s(e){let t=Number(document.querySelector("#listing_min_price").value)||0,n=Number(document.querySelector("#listing_max_price").value)||0;return 0===t&&0===n||e>=t&&e<=n}},3372:(e,t,n)=>{"use strict";function i(){return Math.round(1e3*Math.random())}n.r(t),n.d(t,{generateId:()=>i})},9237:(e,t,n)=>{"use strict";function i(e){const t=new Date,n=new Date(e);return Math.floor((t-n)/864e5)}n.d(t,{f:()=>i})},3539:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CONSOLE_MESSAGE:()=>l,getConsoleMessages:()=>r});var i=n(1203),o=n(2287),s=n(6849),a=n(7091);async function r(){if(window.consoleMessages)return window.consoleMessages;const e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=ConsoleLogFbBot`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text())).then((async e=>{try{return JSON.parse(e)}catch(t){return await(0,s.Z)({error:"Failed to parse getConsoleMessages api response.",x:e}),{}}}));if(e&&e.result){window.consoleMessages={};for(const t of e.result)t.variable&&(window.consoleMessages[t.variable]=t.message||"");return window.consoleMessages}return await(0,s.Z)({error:"Failed to get console messages."}),console.error("Failed to get console message"),{}}function l(e,t,n){if(function(e){return e="object"==typeof e?JSON.stringify(e):e,window.lastLog?window.lastLog===e||void(window.lastLog=e):(window.lastLog=e,!1)}(t||e))return;if("custom"===e)return window.lastLog=t,console.log(t),void(0,a.showLastConsoleLog)(t);if(!window.consoleMessages)return console.error("Called consoleMessage without initiating."),"";let i=window.consoleMessages[e];if(t)for(const e in t){const n=new RegExp(`{${e}}`,"gi");i=i.replace(n,t[e]||"")}console.log(i),(0,a.showLastConsoleLog)(i)}},5703:(e,t,n)=>{"use strict";function i(){const e=document.cookie.split(";");let t="";for(let n=0;n<e.length;n++){const i=e[n];if(i.includes("c_user")){t=i.split("=")[1];break}}return t}n.d(t,{W:()=>i})},8544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getFb_dtsg:()=>o});var i=n(5078);function o(){const e=document.body.outerHTML.match(/"fb_dtsg","value":"(.+?)"/);return e&&e.length>1?e[1]:(0,i.getFrom)(document.body.outerHTML,'DTSGInitialData":{"token":"','"')||""}},3542:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fetchInboxThreads:()=>l});var i=n(1203),o=n(3539),s=n(5703),a=n(2287),r=n(5078);async function l(e){window.global||(window.global={}),window.global.reqCounter||(window.global.reqCounter=0);const t={};let n=e&&e.cursor;const d=e&&e.previousThreads;n&&(t.cursor=n,t.count=12);const u=function(){const e=new Date;return e.setDate(e.getDate()-7),e.getTime()}(),p=function(){const e=document.body.outerHTML.match(/"fb_dtsg","value":"(.+?)"/);return e&&e.length>1?e[1]:(0,r.getFrom)(document.body.outerHTML,'DTSGInitialData":{"token":"','"')||""}(),m=(0,r.getFrom)(document.body.outerHTML,'revision":',",");for(var g="2",_=0;_<p.length;_++)g+=p.charCodeAt(_);const w=(0,r.getFrom)(document.body.outerHTML,'["LSD",[],{"token":"','"}'),h=n?"CometMarketplaceInboxBuyerTabViewPaginationQuery":"CometMarketplaceInboxBuyerTabViewContainerQuery",f=n?"6063301870422274":"9150907031651351",y=(0,s.W)(),b={av:y,__user:y,__a:"1",__req:(window.global.reqCounter++).toString(36),__hs:"19541.HYP:comet_pkg.2.1..2.1",dpr:"2",__ccg:"GOOD",__rev:`${m}`,__s:"r7e81o:lrt2ad:isoco8",__hsi:"7251558458098997704",__dyn:"7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2C17yUJ3odEnz8K2aewnof8boG0x8bo6u3y4o2Gwfi0LVEtwMw65xO2OU7m2210wEwgolzUO0-E4a3a4oaEnxO0Bo7O2l2Utwwwi831wiEjwZx-3m1mzXw8W58jwGzE8FU5e7oqBwJK2W5olwUwOzEjUlDw-wQK261eBx_y88E3qxWm2Sq2-azo7u3C223908O3216xi4UdUcojxK2B0oobo8oC1hxG1Fw",__csr:"g9Ahf9sGvRRfitNb4HbYZWGGrmxGNIjiq8IgkBbsPYJlWOQP4rEzKGRh6QYx6FlFyQHXAGRry-iBAXh27t6t4mVaigiAh9ULpfCGeVK-uqil4BVF68UZ2QAECeDVy-iaBVVbKWBUKm8iByUvKElhu46cyoybGbyomwxJ93Hz8pzoy4Q4e5aKazEDgK2S9AABx626mUThEap8pCxaqeAhUjyk5Z0zyESdwqqye8KmEKu5UnHwHx-1cKE4O2qUqgjzEqK364UvxO2e2W7U-1gxqVXx29DwZxiawnUcEjxO00BAE2Vg07KK031W2i0nO0yE2HU0obCg6m1Cx-0PQ0XA2-0hm1cwGw0GLqx500LThFU0_60f5x51i0pm0muOwmU-051A07rA04c86S0hEHDwgU1TQqjglwjA1FpU3oQ7iqh2a1HwNw44g2gwb60iTwd-0f9x90",__comet_req:"15",fb_dtsg:p,jazoest:g,lsd:w,__spin_r:m,__spin_b:"trunk",__spin_t:"1688385023",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:h,variables:JSON.stringify(t),server_timestamps:"true",doc_id:f};let x=await fetch("https://www.facebook.com/api/graphql/",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":"CometMarketplaceSearchContentContainerQuery","x-fb-lsd":"IudQ3V8x_C_Vv_XEg-5tyu"},referrer:"https://www.facebook.com/marketplace/110301228992872/search?query=rice",referrerPolicy:"strict-origin-when-cross-origin",body:c(b),method:"POST",mode:"cors",credentials:"include"}).then((async e=>(0,a.handleFetchErrors)(e))).then((e=>e.json()));const v=JSON.stringify(x);if(v&&v.match(/api_error_code":368/i)){const t=(new Date).getTime()+60*i.waitIfSpamDetected*1e3,n=moment(t).calendar();return(0,o.CONSOLE_MESSAGE)("halted_soft",{schedule:n}),window.isKO=!0,await sleep(60*i.waitIfSpamDetected*1e3),window.isKO=!1,l(e)}let S=[];const k=x&&x.data&&x.data.viewer&&x.data.viewer.marketplaceInboxBuyerMessageThreads&&x.data.viewer.marketplaceInboxBuyerMessageThreads.edges;if(k)for(let e=0;e<k.length;e++){const t=k[e],n=t&&t.node;if(n&&n.updated_time_precise<=u)return d&&(S=d.concat(S)),S;S.push(n)}d&&(S=d.concat(S));const E=x&&x.data&&x.data.viewer&&x.data.viewer.marketplaceInboxBuyerMessageThreads&&x.data.viewer.marketplaceInboxBuyerMessageThreads.page_info;return E&&E.has_next_page?(n=E.end_cursor,await sleep(5e3),l({cursor:n,previousThreads:S})):S}function c(e){const t=[];for(let n in e)if(e.hasOwnProperty(n)){const i=encodeURIComponent(n),o=encodeURIComponent(e[n]);t.push(`${i}=${o}`)}return t.join("&")}},5836:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getKeyword:()=>o});var i=n(1334);async function o(){let e=await(0,i.gI)("lastKwIdx");e=e||0===e?parseInt(e,10)+1:0;let t=document.querySelector("#ta #keywords").value;return t?(e>=t.split(",").length&&(e=0),t=t.split(",").map((e=>e.trim())),await(0,i.Q5)("lastKwIdx",e),String(t[e]).trim().length?{keyword:t[e]}:o()):(console.error("No keywords found."),alert("No keywords found."),{error:"no keyword found"})}},9105:(e,t,n)=>{const{sheet_id:i}=n(1203)},8414:(e,t,n)=>{"use strict";async function i(e){return fetch(`https://us-central1-trade-apples.cloudfunctions.net/partners?getpartnerdetails=1&uid=${e}`).then((e=>e.json()))}n.r(t),n.d(t,{getPartnerDetails:()=>i})},2320:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getQuote:()=>c});var i=n(9178),o=n(3539),s=n(6849);async function a(){try{if(window.kvJson)return window.kvJson;const e=await fetch("https://prices.phones.trade/?kvread=key_values").then((e=>e.json()));return window.kvJson=e,e}catch(e){return console.log("error",e),await(0,s.Z)({error:"Failed to get key values from prices endpoint"}),""}}function r(e){if(e&&e.match(/internal/i))return"internal";let t=e;const n=e.match(/\[(.+)\]/);let i="";return n&&(i=n[1].trim(),t=t.replace(`[${i}]`,"").trim(),t=t.split("-"),t=t.length>1?t[1].trim():t[0].trim()),t}async function l(e){const t=await a();if(!t)return"";const n=t.bykey;return n&&n[e]||""}async function c(e,t){console.log("Getting quote.."),(0,o.CONSOLE_MESSAGE)("custom",`Getting quote of listing (${t})`);const n=e.model||"14promax",s=e.storage,c=e.network,d=e.condition||"likenew",u=e.deductions||"";let p,m;e.model&&e.storage&&e.network&&e.condition&&e.deductions||console.log("Found case with missing variant details.",e,t);const g=await async function(e){const t=(await a()).bykey;let n=[];if(!t)return"";const i=Object.keys(t).filter((e=>e.startsWith("M")));for(const e of i)n.push({key:e,value:t[e]});e&&!e.startsWith("iphone")&&(e="iphone"+e);for(const t of n){let n=t.value;if(n=n.toLowerCase().replace(/\s+/g,""),"iphonese2020"===n&&(n="iphonese2"),"iphonese2022"===n&&(n="iphonese3"),n===e)return t.key}}(n);s&&(p=await async function(e){const t=await a();return e=e.toUpperCase(),t.byvalue[e]}(s)),c&&(m=await async function(e){const t=await a(),n=Object.keys(t.bykey).filter((e=>e.startsWith("N")));for(const o of n){const n=(0,i.M)(t.bykey[o]);if(e.toLowerCase()===n.toLowerCase())return o}}(c));const _=await async function(e){const t=(await a()).bykey,n=[];if(!t)return"";const i=Object.keys(t).filter((e=>e.startsWith("C")));for(const e of i)n.push({key:e,value:t[e]});e&&(e=e.toLowerCase().replace(/\s+/g,""));for(const t of n){let n=t.value;if(n=r(n),n=n.toLowerCase().replace(/\s+/g,""),n===e)return t.key}return""}(d),w=await function(e){const t=[];e&&e.forEach((e=>{let n;switch(e){case"touchid issue":case"faceid issue":n="D3";break;case"crackedback":case"crackediphone":n="D1";break;case"simcard reading issue":n="D5";break;case"wifiissues":case"wifiproblems":n="D4";break;case"camera issues":case"cameraproblems":case"brokencamera":n="D2";break;case"crackedcameralens":n="D13"}n&&t.push(n)}))}(u);console.log("deductionKeys",w);const h={model:(0,i.M)(await l(g)),condition:(0,i.M)(await l(_))};if(p&&(h.storage=(0,i.M)(await l(p))),m&&(h.network=(0,i.M)(await l(m))),w&&Array.isArray(w)){const e=w.map((e=>{console.log("key",e);let t=l(x);return(0,i.M)(t)}));h.deductions=e}u&&u.includes("icloud")&&(p="S5",m="N6"),console.log("modelKey",g),console.log("storageKey",p),console.log("networkKey",m),console.log("conditionKey",_),console.log("deductionKeys",w);const f=await async function(e,t,n,i,o){let s=o?o.join("-"):"";return s&&(s=`&deductions=${s}`),await fetch(`https://prices.phones.trade/?getvariantprice=1&model=${e}&storage=${t||""}&network=${n||""}&condition=${i||""}${s}`).then((e=>e.text())).then((e=>{try{return JSON.parse(e)}catch(e){return{}}}))}(g,p,m,_,w);return console.log("price",f.price),!p&&f.storageKey&&(h.storage=(0,i.M)(await l(f.storageKey))),!m&&f.networkKey&&(h.network=(0,i.M)(await l(f.networkKey))),h.price=f.price,h}},2617:(e,t,n)=>{"use strict";function i(){if(window.userEmail)return window.userEmail;const e=document.body.outerHTML.match(/"username":"(.+?)"/);return e&&e.length>1?(window.userEmail=e[1],window.userEmail):void 0}n.d(t,{g:()=>i})},5639:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getUserListings:()=>u});var i=n(1203),o=n(13),s=n(3539),a=n(5703),r=n(8544),l=n(2287),c=n(4246),d=n(5078);async function u(e,t,n,p){let m={scale:2,sellerID:e},g="5916012751817013";n&&(console.log("cursor",n),m={availabilities:["IN_STOCK"],count:8,cursor:n,order:"CREATION_TIMESTAMP_DESC",scale:2,search:null,id:e},g="5793095287435129");let _="MarketplaceSellerProfileInventoryQuery";n&&(_="MarketplaceSellerProfileInventoryListPaginationQuery");const w=(0,r.getFb_dtsg)(),h=(0,d.getFrom)(document.body.outerHTML,'revision":',",");for(var f=0;f<w.length;f++)w.charCodeAt(f);const y=(0,d.getFrom)(document.body.outerHTML,'["LSD",[],{"token":"','"}'),b=(0,a.W)(),x=await fetch("https://www.facebook.com/api/graphql/",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":_,"x-fb-lsd":y},referrer:"https://www.facebook.com/marketplace/item/2620405768097653/?ref=search&referral_code=null&referral_story_type=post&tracking=browse_serp%3Aa3117bdc-6ff8-4cc8-be80-d19683441210",referrerPolicy:"strict-origin-when-cross-origin",body:`av=${b}&__user=${b}&__a=1&__req=4l&__hs=19542.HYP%3Acomet_pkg.2.1..2.1&dpr=2&__ccg=GOOD&__rev=${h}&__s=12vy3m%3A0e0321%3A5dnfrh&__hsi=7251815563541642227&__dyn=7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2CE4ibyQdwSAxacyUco5S3O2Saw8i2S1DwUx60GE3Qwb-q7oc81xoswIK1Rwwwg8a8465o-cw5Mx62G5Usw9m1YwBgK7o884y0Mo4G4UcUC7Udo5qfK0zEkxe2GewyDwkUtxGm2SUbElxm3y3aexfxmu3W3y261eBx_y88E3qxWm2Sq2-azo7u3C223908O3216xi4UdUcojxK2B0oobo8oC1Iwqo&__csr=gggP5FNdOTdEQRq5YyQy8vEIAGb94EJdOirtjGB98YyPQDYJ9XCYyKLvtidmW9h2dX8QFyrTjHmnGaVCHbKRyl--GhtVd7JbGnG55VXxibypbCgVatmA8GcHKlBGdQ8HBy49CqCKjyV9V6eULG4t7-dx2cgrBgm-dGu4HK6FBxB1ameyFoS7UG5XCwKxvggBUiAAjKdDGcCGdDgPwWgWdxW6F4u2G4-7ojDwHAxO7bwAxG9yQ-E4C4Uy6e4EW3ycxe264EK3yiu5ocUcVUK2e1kjwEwGxeu7EcUmwby4osw0AOw0LjUco041C1kw0r1Uy0eyw0N2w6xwcy0y80_60b-xq0FpFU94bg3Tg2Cwoo7a3O02FQEkw0Li80So3AU0I60du80MU3bw7eDu4E0bEo-06e82Ozo1Fqx52e8yLw6oBtV8yaxx38a8bU7-0im0u10dC0f7x50&__comet_req=15&fb_dtsg=${w}&jazoest=25236&lsd=${y}&__spin_r=${h}&__spin_b=trunk&__spin_t=1688444885&fb_api_caller_class=RelayModern&fb_api_req_friendly_name=${_}&variables=${JSON.stringify(m)}&server_timestamps=true&doc_id=${g}`,method:"POST",mode:"cors",credentials:"include"}).then((async e=>(0,l.handleFetchErrors)(e))).then((e=>e.text()));if(x.match(/api_error_code":368/i)){const t=(new Date).getTime()+60*i.waitIfSpamDetected*1e3,n=moment(t).calendar();return(0,s.CONSOLE_MESSAGE)("halted_soft",{schedule:n}),window.isKO=!0,await(0,c.sleep)(60*i.waitIfSpamDetected*1e3),window.isKO=!1,await u(e)}const v=x.split("\r\n");let S=[];if(p&&(S=[...p]),v.forEach(((e,t)=>{try{const t=JSON.parse(e);if(t.data&&t.data.profile&&t.data.profile.marketplace_listing_sets&&t.data.profile.marketplace_listing_sets.edges)t.data.profile.marketplace_listing_sets.edges.forEach((e=>{const t={},n=e.node.canonical_listing.marketplace_listing_title,i=e.node.canonical_listing.listing_price.amount,o=e.node.canonical_listing.id;n&&(t.title=n),i&&(t.price=i),o&&(t.id=o),S.push(t)}));else if(t.data&&t.data.node&&t.data.node.canonical_listing){const e={},n=t.data.node.canonical_listing.marketplace_listing_title,i=t.data.node.canonical_listing.listing_price.amount,o=t.data.node.canonical_listing.id;n&&(e.title=n),i&&(e.price=i),o&&(e.id=o),S.push(e)}}catch(e){console.log(e)}})),!t){const t=[];let n=!1;for(let e=0;e<S.length;e++){const i=S[e].id,s=(0,o.fetchListingDetails)({id:i}).then((t=>{t.error?(console.error("Failed to get listing details.",t.error),"rate_limit_exceeded"===t.error_code&&(n=!0)):S[e]={...S[e],...t}}));e%10==0&&(await(0,c.sleep)(2e3),await Promise.all(t),t.length=0),t.push(s)}if(await Promise.all(t),n){const t=(new Date).getTime()+60*i.waitIfSpamDetected*1e3,n=moment(t).calendar();return(0,s.CONSOLE_MESSAGE)("halted_soft",{schedule:n}),window.isKO=!0,await(0,c.sleep)(60*i.waitIfSpamDetected*1e3),window.isKO=!1,await u(e)}}return console.log("Got end results of user listings."),S}},1439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getVariant:()=>p});var i=n(1203),o=n(2287),s=n(4484);async function a(){console.log("Fetching model matches1.");let e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=model`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text())).catch((e=>{(0,s._apiSendBug)({error:"Failed to get model matches.",e:e.toString()}),alert("Failed to get model matches.")}));if(e&&!e.includes("13promax"))return a();e=JSON.parse(e),console.log("Model matches has been fetched.",e);const t={};return e.result&&Array.isArray(e.result)&&e.result.length?(e.result.forEach((e=>{for(const n in e)t[n]||(t[n]=[]),e[n]&&t[n].push(e[n])})),t):((0,s._apiSendBug)({error:"Failed to get model matches.",x:e}),alert("Failed to get model matches."),t)}async function r(){console.log("Fetching storage matches.");let e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=storage`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text())).catch((e=>{(0,s._apiSendBug)({error:"Failed to get storage matches.",e:e.toString()}),alert("Failed to get model matches.")}));if(e&&!e.includes("256gb"))return r();e=JSON.parse(e),console.log("Storage matches has been fetched.");const t={};return e.result&&Array.isArray(e.result)&&e.result.length?(e.result.forEach((e=>{for(const n in e)t[n]||(t[n]=[]),e[n]&&t[n].push(e[n])})),t):((0,s._apiSendBug)({error:"Failed to get storage matches.",x:e}),alert("Failed to get storage matches."),t)}async function l(){console.log("Fetching network matches.");let e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=network`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text())).catch((t=>{(0,s._apiSendBug)({error:"Failed to get network matches.",x:e}),alert("Failed to get network matches.")}));if(e&&!e.includes("unlocked"))return l();e=JSON.parse(e),console.log("Network matches has been fetched.");const t={};return e.result&&Array.isArray(e.result)&&e.result.length?(e.result.forEach((e=>{for(const n in e)t[n]||(t[n]=[]),e[n]&&t[n].push(e[n])})),t):((0,s._apiSendBug)({error:"Failed to get network matches.",x:e}),alert("Failed to get network matches."),t)}async function c(){console.log("Fetching deduction matches.");let e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=deductions`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text())).catch((e=>{(0,s._apiSendBug)({error:"Failed to get deduction matches.",e:e.toString()}),alert("Failed to get deduction matches.")}));if(e&&!e.includes("icloud"))return c();e=JSON.parse(e),console.log("Deduction matches has been fetched.");const t={};return e.result&&Array.isArray(e.result)&&e.result.length?(e.result.forEach((e=>{for(const n in e)t[n]||(t[n]=[]),e[n]&&t[n].push(e[n])})),t):((0,s._apiSendBug)({error:"Failed to get deduction matches.",x:e}),alert("Failed to get deduction matches."),t)}var d=n(13);function u(e,t){if(!e)return"";for(const n of e)if(n.attributeName===t&&Array.isArray(n.attributeValue)&&n.attributeValue.length)return n.attributeValue[0].toLowerCase();return""}async function p(e,t){window.textMatchIndex={},window.textMatchIndex[e]={};const n={};return n.model=await async function(){const n=t.title&&t.title.toLowerCase(),i=t.description&&t.description.toLowerCase(),o=["11promax","11pro","11","xsmax","xs","xr","x","8plus","8","7plus","7","se2","12promax","12pro","12mini","12","13promax","13pro","13mini","13","6plus","6splus","6s","6"];if(!window.modelMatches){const e=await a();window.modelMatches=[],o.forEach((t=>{window.modelMatches.push([t,e[t]])}))}const s=window.modelMatches;for(const t of s){const o=t[0],s=t[1];if(Array.isArray(s))for(const t of s){const s=new RegExp(t,"i");let a="";if(a)return window.textMatchIndex[e].modelFromAttribute||(window.textMatchIndex[e].modelFromAttribute={}),window.textMatchIndex[e].modelFromAttribute.model={rgx:s},o;if(a=n&&n.match(s),a)return window.textMatchIndex[e].title||(window.textMatchIndex[e].title={}),window.textMatchIndex[e].title.model={rgx:s},o;if(a=i&&i.match(s),a)return window.textMatchIndex[e].description||(window.textMatchIndex[e].description={}),window.textMatchIndex[e].description.model={rgx:s},window.textMatchIndex[e].model={via:"description",index:a.index,length:s.source.length},o}}for(const e of s){const t=e[0],n=e[1];if(console.log("keyMatches",n),n)for(const e of n){const n=new RegExp(e,"i");if(i&&i.match(n))return t}}}(),n.storage=await async function(){const i=t.title&&t.title.toLowerCase(),o=t.description&&t.description.toLowerCase();window.storageMatches||(window.storageMatches=await r());const s=window.storageMatches,a={"16gb":["16\\s?gb"]};for(const t in s){const n=s[t];for(const s of n){const n=new RegExp(s,"i");if(i&&i.match(n))return window.textMatchIndex[e].title||(window.textMatchIndex[e].title={}),window.textMatchIndex[e].title.storage={rgx:n},t;if(o&&o.match(n))return window.textMatchIndex[e].description||(window.textMatchIndex[e].description={}),window.textMatchIndex[e].description.storage={rgx:n},t}}for(const e in a){const t=a[e];for(const s of t){const t=new RegExp(s,"i");if(i&&i.match(t))return n.skip=!0,e;if(o&&o.match(t))return n.skip=!0,e}}}(),n.network=await async function(){const n=t.title&&t.title.toLowerCase(),i=t.description&&t.description.toLowerCase(),o=["unlocked","locked"];if(!window.networkMatches){const e=await l();window.networkMatches=[],o.forEach((t=>{window.networkMatches.push([t,e[t]])}))}const s=window.networkMatches;for(const t of s){const o=t[0],s=t[1];for(const t of s){const s=new RegExp(t,"i");if(n&&n.match(s))return window.textMatchIndex[e].title||(window.textMatchIndex[e].title={}),window.textMatchIndex[e].title.network={rgx:s},o;if(i&&i.match(s))return window.textMatchIndex[e].description||(window.textMatchIndex[e].description={}),window.textMatchIndex[e].description.network={rgx:s},o}}}(),n.condition=await function(){if(t&&t.condition){if("new"===t.condition)return"newinbox";if("used_like_new"===t.condition)return"new";if("used_good"===t.condition)return"likenew";if("used_fair"===t.condition)return"used"}}(),n.deductions=await async function(){const n=t.title&&t.title.toLowerCase(),i=t.description&&t.description.toLowerCase(),o=["icloud","crackedcameralens","faceid issue"];if(!window.deductionMatches){const e=await c();window.deductionMatches=[],o.forEach((t=>{window.deductionMatches.push([t,e[t]])}))}const s=window.deductionMatches,a=[];for(const t of s){const o=t[0],s=t[1];for(const t of s){const s=new RegExp(t,"i");n&&n.match(s)?(window.textMatchIndex[e].title||(window.textMatchIndex[e].title={}),window.textMatchIndex[e].title.deductions||(window.textMatchIndex[e].title.deductions=[]),window.textMatchIndex[e].title.deductions.push(s),a.push(o)):i&&i.match(s)&&(window.textMatchIndex[e].description||(window.textMatchIndex[e].description={}),window.textMatchIndex[e].description.deductions||(window.textMatchIndex[e].description.deductions=[]),window.textMatchIndex[e].description.deductions.push(s),a.push(o))}}return a}(),t.price?n.listing_price=parseFloat(t.price):n.listing_price=0,window.lastVariant=n,async function(e,t){let n;if(e&&(n=e),!n)return;window.bugReport={};const i=t||await(0,d.fetchListingDetails)({id:n});window.bugReport.listingId=n;const o=u(i.attributes,"model"),s=u(i.attributes,"carrierNetwork");if(document.querySelector("#buglistingdetails").innerHTML="",document.querySelector("#bugvariantdetails").innerHTML="",a("URL",window.location.href),i.title){let e=i.title;e=l(e,"title"),a("Title",e),window.bugReport.listing_title=e}if(i.description){let e=i.description;e=l(e,"description"),a("Description",e),window.bugReport.listing_description=e}if(o){let e=o;e=l(e,"modelFromAttribute"),a("Model",e),window.bugReport.listing_detail_model=e}if(s){let e=s;e=l(e,"networkFromAttribute"),a("Network",e),window.bugReport.listing_detail_network=e}function a(e,t){document.querySelector("#buglistingdetails").innerHTML+=` <div class="report-detail">\n                            <span class="label">${e}</span>\n                            <span id="itemtitle">${t}</span>\n                          </div>`}function r(e,t){document.querySelector("#bugvariantdetails").innerHTML+=` <div class="report-detail">\n                            <span class="label">${e}</span>\n                            <span id="itemtitle">${t}</span>\n                          </div>`}function l(e,t){if(window.textMatchIndex[n]&&window.textMatchIndex[n][t]){if(window.textMatchIndex[n][t].model){const i=window.textMatchIndex[n][t].model.rgx;e=e.replace(i,(e=>`<strong class="blue">${e}</strong>`))}if(window.textMatchIndex[n][t].storage){const i=window.textMatchIndex[n][t].storage.rgx;e=e.replace(i,(e=>`<strong class="green">${e}</strong>`))}if(window.textMatchIndex[n][t].network){const i=window.textMatchIndex[n][t].network.rgx;e=e.replace(i,(e=>`<strong class="purple">${e}</strong>`))}if(window.textMatchIndex[n][t].deductions){const i=window.textMatchIndex[n][t].deductions;for(const t of i)e=e.replace(t,(e=>`<strong class="red">${e}</strong>`))}}return e}window.lastVariant&&(window.lastVariant.model&&(window.bugReport.model=window.lastVariant.model,r("Model",window.lastVariant.model)),window.lastVariant.storage&&(window.bugReport.storage=window.lastVariant.storage,r("Storage",window.lastVariant.storage)),window.lastVariant.network&&(window.bugReport.network=window.lastVariant.network,r("Network",window.lastVariant.network)),window.lastVariant.condition&&(window.bugReport.condition=window.lastVariant.condition,r("Condition",window.lastVariant.condition)))}(e,t),n}window.getVariant=p},3119:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var i=n(6849);async function o(e){return fetch(`https://us-central1-trade-apples.cloudfunctions.net/partners?getDomain=1&uid=${e}`).then((e=>e.text())).then((t=>{try{const n=JSON.parse(t);let i=n&&n.domain;return i||(i=`${e}.tradeapples.com`),`https://${i}`}catch(t){return`https://${e}.tradeapples.com`}})).catch((t=>((0,i.Z)({error:"getWebsiteVariable failed.",detail:t.toString()}),`https://${e}.tradeapples.com`)))}},2287:(e,t,n)=>{"use strict";function i(e){return new Promise(((t,n)=>unsafeWindow.isRun?e.ok?void t(e):(console.trace(),void setTimeout((()=>{n(e.statusText)}),1e4)):t(e)))}n.r(t),n.d(t,{handleFetchErrors:()=>i})},6722:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function injectHoplaLogin(e){window.HOPLA_login=HOPLA_login,HOPLA_login.init({projectid:"-MuH8erCc-DO-GAWvO7v",onready:function(){console.log("User Details1",HOPLA_login.user),console.log("You are logged in as ",HOPLA_login.user.uid),"function"==typeof e&&e(HOPLA_login.user)}}),document.head.insertAdjacentHTML("beforeend","<style>\n    #ta .hopla-button {\n      position: absolute;\n      top: 29%;\n      left: 50%;\n      transform: translate(-50%);\n    }\n    </style>")}function execute(){var HOPLA_login;function log(e,t){const n="hopla-login",i=[n,"-",e];for(let e=1;e<arguments.length;e++)i.push(arguments[e]);console.log.apply(this,i)}return(()=>{const hopla_login_domain="https://login.hopla.to/me";let localInit,isLoggedIn,prevStatus,oProjectDetails,readyExecuted=!1,oMessage;function login(e){if(!getHoplaFrame())return console.log("frame not yet ready."),void setTimeout((()=>{HOPLA_login.login(e)}),200);isLoggedIn&&HOPLA_login.user?"function"==typeof e&&e(HOPLA_login.user):("function"==typeof e&&(HOPLA_login.pendingCallback=e),show())}function notyou(e){"function"==typeof e&&(HOPLA_login.pendingCallback=e),show({switchuser:!0})}function listener(e){if(e.data.hoplalogin&&!e.data.command&&(console.log("e.data",e.data),"loggedin"in e.data&&(e.data.projectaccepted&&(HOPLA_login.projectaccepted=!0),e.data.projectprompt&&(void 0===HOPLA_login.initstatus&&(HOPLA_login.initstatus="projectprompt"),HOPLA_login.projectprompt=!0),e.data.socialprompt&&(void 0===HOPLA_login.initstatus&&(HOPLA_login.initstatus="socialprompt"),HOPLA_login.socialprompt=!0),e.data.verifications_needed&&(HOPLA_login.verifications_needed=e.data.verifications_needed),HOPLA_login.loggedin=e.data.loggedin,e.data.loggedin?(isLoggedIn=!0,localInit.onpreview&&"function"==typeof localInit.onpreview&&localInit.onpreview(e.data.user),void 0===HOPLA_login.initstatus&&(HOPLA_login.initstatus=!0),0==HOPLA_login.initstatus||HOPLA_login.initstatus,prevStatus&&delete HOPLA_login.anonID,e.data.user&&(HOPLA_login.user=e.data.user,saveUserCookie(e.data.user)),"function"==typeof HOPLA_login.pendingCallback&&(HOPLA_login.pendingCallback(HOPLA_login.user),delete HOPLA_login.pendingCallback),HOPLA_login.hide(),"crisp"in localInit&&(crispAddUser(HOPLA_login.user),localInit.crisp&&localInit.crisp.segment&&cispAddSegment(localInit.crisp.segment),localInit.crisp&&localInit.crisp.tag&&cispAddTag(localInit.crisp.tag)),prevStatus=!0):e.data.loggedin||(e.data.user?(saveUserCookie(e.data.user),e.data.user.displayName||delete_cookie("h_displayName"),e.data.user.fname||delete_cookie("h_fname"),e.data.user.photoURL||delete_cookie("h_photoURL")):(delete_cookie("h_displayName"),delete_cookie("h_fname"),delete_cookie("h_photoURL")),isLoggedIn=!1,HOPLA_login.initstatus=!1,HOPLA_login.anonID=e.data.user.uid,e.data.user&&(HOPLA_login.user=e.data.user),e.data.anonymous&&(HOPLA_login.user.isAnonymous=!0),localInit.onlogout&&"function"==typeof localInit.onlogout&&localInit.onlogout(HOPLA_login.user),prevStatus=!1),e.data.user&&e.data.user.uid&&"google_analytics"in localInit&&localInit.google_analytics&&localInit.google_analytics.custom_dimension_index&&ga_event_pageview(e.data.user.uid,localInit.google_analytics.custom_dimension_index)),"invalid_email_domain"in e.data&&HOPLA_login.onInvalidEmailDomain&&HOPLA_login.onInvalidEmailDomain(),"success_refresh"in e.data&&(HOPLA_login.user.token=e.data.token,HOPLA_login.refreshcallback&&(HOPLA_login.refreshcallback(e.data.token),delete HOPLA_login.refreshcallback)),"function"!=typeof localInit.onready||readyExecuted||(readyExecuted=!0,localInit.onready()),e.data.iframedbutton))if(e.data.login){const iframeBtn=document.querySelector('iframe[title="hopla:login_button HOPLA Plugin"]');iframeBtn.dataset.onlogin?login(eval(iframeBtn.dataset.onlogin)):login()}else if(e.data.notyou){const iframeBtn=document.querySelector('iframe[title="hopla:login_button HOPLA Plugin"]');iframeBtn.dataset.onlogin?notyou(eval(iframeBtn.dataset.onlogin)):notyou()}}function show(e){const t=getPopupURL(e),n=document.getElementById("hopla_hidden_frame");n&&n.remove(),window.showpopup({source:`<iframe id="hopla_login_frame" src="${t}" width="448px" height="631px"></iframe>`})}function crispAddUser(e,t){t||(t=0),(t+=1)>10||("undefined"==typeof $crisp?setTimeout((function(){crispAddUser(e,t)}),1e3):(e.email&&$crisp.push(["set","user:email",[e.email]]),e.displayName&&$crisp.push(["set","user:nickname",[e.displayName]]),e.photoURL&&$crisp.push(["set","user:avatar",[e.photoURL]])))}function cispAddSegment(e,t){if(t||(t=0),!((t+=1)>10))if("undefined"==typeof $crisp)setTimeout((function(){cispAddSegment(e,t)}),1e3);else{let t;Array.isArray(e)?t=e:"string"==typeof e?t=[e]:console.error("Invalid segment type. Must be string or array. Used ",typeof e),t&&$crisp.push(["set","session:segments",[t]])}}function cispAddTag(e,t){if(t||(t=0),!((t+=1)>10))if("undefined"==typeof $crisp)setTimeout((function(){cispAddTag(e,t)}),1e3);else{if("object"!=typeof e)return void console.error("Invalid tags input type. Must be an object. Used ",typeof e);const t=[];for(const n in e)t.push([n,e[n]]);t.length&&$crisp.push(["set","session:data",[t]])}}function crispPushEvent(e,t,n){t||(t=""),n||(n=0),(n+=1)>10||("undefined"==typeof $crisp?setTimeout((function(){crispPushEvent(e,t,n)}),1e3):$crisp.push(["set","session:event",[[[e,{value:t}]]]]))}function gaPushEvent(e,t,n,i){i||(i=0),(i+=1)>10||("undefined"==typeof ga?setTimeout((function(){gaPushEvent(e,t,n,i)}),1e3):"ga"in window&&(tracker=ga.getAll()[0],tracker&&tracker.send("event",e,t,n)))}function fbPushEvent(e,t,n,i){i||(i=0),(i+=1)>10||("undefined"==typeof fbq?setTimeout((function(){fbPushEvent(e,t,n,i)}),1e3):fbq("trackCustom",e,{action:t,label:n}))}function setCookie(e,t){document.cookie=e+"="+(t||"")+"; Expires=Thu, 31 Dec 2037 07:28:00 GMT; path=/"}function getCookie(e){const t=e+"=",n=document.cookie.split(";");for(var i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function delete_cookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function saveUserCookie(e){e.isAnonymous?setCookie("h_anon",e.isAnonymous):delete_cookie("h_anon"),setCookie("h_uid",e.uid),setCookie("h_project",HOPLA_login.projectid),setCookie("h_displayName",e.displayName||""),e.fname?setCookie("h_fname",e.fname):setCookie("h_fname",getFname(e.displayName)),e.photoURL&&setCookie("h_photoURL",e.photoURL)}function cookieTokenCheck(){let e=getCookie("h_local_login");return e&&"true"==e}function getFname(e){try{return e.split(" ")[0]}catch(t){return e}}function getHoplaFrame(){const e=document.getElementById("hopla_hidden_frame")||document.getElementById("hopla_login_frame");if(e)return e}function addSegment(e){let t;if(Array.isArray(e))t=e;else{if("string"!=typeof e)return void console.error("Invalid segment type. Must be string or array. Used ",typeof e);t=[e]}const n=getHoplaFrame();if(!n)return console.error("HOPLA Frame not found. Failed to push segment."),void sendDebugLog({msg:"HOPLA Frame not found. Failed to push segment."});oMessage={add_segment:!0,segment:e},n.contentWindow.postMessage(oMessage,hopla_login_domain)}function addTag(e){if("object"!=typeof e)return void console.error("Invalid tags input type. Must be an object. Used ",typeof e);const t=getHoplaFrame();t?(oMessage={add_tag:!0,tag:e},t.contentWindow.postMessage(oMessage,hopla_login_domain)):HOPLA_login.user&&HOPLA_login.projectid&&fetch(`https://us-central1-hopla-tools.cloudfunctions.net/login_add_tag?token=${HOPLA_login.user.token}&projectid=${HOPLA_login.projectid}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).catch((e=>{sendDebugLog({error:e.toString(),file:"hopla-login.js"})}))}function sendDebugLog(e){return e.file||(e.file="hopla-login.js"),fetch("https://webhook.hopla.workers.dev/debug?project=HOPLA-Login",{method:"POST",body:JSON.stringify(e)})}async function getProjectDetails(e){return e?fetch(`https://login.hopla.to/get_project_details?projectid=${e}`).then((e=>e.text())).catch((e=>(sendDebugLog({func:"getProjectDetails",file:"hopla-login.js",stack:(new Error).stack,message:"login.hopla.to/getProjectDetails",error:e.toString()}),{}))).then((e=>{try{return(e=JSON.parse(e)).success}catch(e){return sendDebugLog({msg:"Failed to parse get_project_details response",func:"getProjectDetails",file:"hopla-login.js",error:e.toString()}),{}}})):(sendDebugLog({func:"getProjectDetails",error:"User did not set a project ID in init."}),console.error("User did not set a project ID in init."),{})}function getPopupURL(e){let t="";return HOPLA_login.logo&&(t+=t?"&":"?",t+="logo="+encodeURIComponent(HOPLA_login.logo)),HOPLA_login.text&&(t+=t?"&":"?",t+="text="+encodeURIComponent(HOPLA_login.text)),HOPLA_login.projectid&&(t+=t?"&":"?",t+="projectid="+encodeURIComponent(HOPLA_login.projectid)),HOPLA_login.projectname&&(t+=t?"&":"?",t+="projectname="+encodeURIComponent(HOPLA_login.projectname)),HOPLA_login.emaildomain&&(t+=t?"&":"?",t+="emaildomain="+encodeURIComponent(HOPLA_login.emaildomain)),HOPLA_login.socials&&(t+=t?"&":"?",t+="socials="+encodeURIComponent(JSON.stringify(HOPLA_login.socials))),HOPLA_login.num_req&&(t+=t?"&":"?",t+="num_req="+HOPLA_login.num_req),e&&e.switchuser&&(t+=t?"&":"?",t+="switchuser=1"),`${hopla_login_domain}${t}`}function waitGA(e,t){t||(t=0),(t+=1)>40||("function"==typeof ga?"function"==typeof e&&e():setTimeout((()=>{waitGA(e,t)}),300))}async function ga_event_pageview(e,t){waitGA((()=>{let n=function(){let e="";try{e=ga.getAll()[0].get("name")+"."}catch(e){console.log(e)}return e}();ga(n+"set","dimension"+t,e),ga(n+"send",{hitType:"event",eventCategory:"HOPLA Login",eventAction:"page_view",eventLabel:location.hostname+location.pathname})}))}window.addEventListener("message",(e=>{if(e.data.command&&e.data.hoplalogin&&"get_project_details"===e.data.command){const t=getHoplaFrame();if(!t)return console.error("HOPLA Frame not found. Failed to push segment."),void sendDebugLog({msg:"HOPLA Frame not found. Failed to push segment."});function n(){oProjectDetails?(oMessage={set_project_details:oProjectDetails},t.contentWindow.postMessage(oMessage,hopla_login_domain)):setTimeout((()=>{n()}),100)}n()}})),HOPLA_login={init:async function(e){if(localInit=e,localInit.projectid){if(oProjectDetails=await getProjectDetails(localInit.projectid),!oProjectDetails)return void console.error("Invalid Project ID. Register at https://hopla.tools.");HOPLA_login.projectid=localInit.projectid,HOPLA_login.projectname=oProjectDetails.title}void 0===window.showpopup&&function e(t){t||(t=0),(t+=1)>100?console.error("Failed to insert login popup."):document.body?(function(){const e=".overlay {position: fixed;top: 0;bottom: 0;left: 0;right: 0;background: rgba(0, 0, 0, 0.7);transition: display 500ms;display: none;z-index: 10000000;}.overlay:target {display: 'block';}.popup-content {position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);}.popup-content h2 {margin-top: 0;color: #333;font-family: Tahoma, Arial, sans-serif;}.popup-content .close {position: absolute;top: 20px;right: 30px;transition: all 200ms;font-size: 30px;font-weight: bold;text-decoration: none;color: #333;}.popup-content .close:hover {color: #06D85F;}.popup-content .content {max-height: 30%;overflow: auto;}",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(),document.body.insertAdjacentHTML("beforeend",`<div id="popup1" class="overlay">${oProjectDetails.disallow_login_close?"":'<input id="close-popup" class="action-icon" type="image" alt="action icon" onclick="window.closepopup()" style="position: absolute;right: 1rem;top: 0.5rem;height: 20px;z-index: 3;cursor: pointer;" src="data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJ0aW1lcyIgY2xhc3M9InN2Zy1pbmxpbmUtLWZhIGZhLXRpbWVzIGZhLXctMTEiIHJvbGU9ImltZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzUyIDUxMiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMjQyLjcyIDI1NmwxMDAuMDctMTAwLjA3YzEyLjI4LTEyLjI4IDEyLjI4LTMyLjE5IDAtNDQuNDhsLTIyLjI0LTIyLjI0Yy0xMi4yOC0xMi4yOC0zMi4xOS0xMi4yOC00NC40OCAwTDE3NiAxODkuMjggNzUuOTMgODkuMjFjLTEyLjI4LTEyLjI4LTMyLjE5LTEyLjI4LTQ0LjQ4IDBMOS4yMSAxMTEuNDVjLTEyLjI4IDEyLjI4LTEyLjI4IDMyLjE5IDAgNDQuNDhMMTA5LjI4IDI1NiA5LjIxIDM1Ni4wN2MtMTIuMjggMTIuMjgtMTIuMjggMzIuMTkgMCA0NC40OGwyMi4yNCAyMi4yNGMxMi4yOCAxMi4yOCAzMi4yIDEyLjI4IDQ0LjQ4IDBMMTc2IDMyMi43MmwxMDAuMDcgMTAwLjA3YzEyLjI4IDEyLjI4IDMyLjIgMTIuMjggNDQuNDggMGwyMi4yNC0yMi4yNGMxMi4yOC0xMi4yOCAxMi4yOC0zMi4xOSAwLTQ0LjQ4TDI0Mi43MiAyNTZ6Ij48L3BhdGg+PC9zdmc+">'}<div class="popup-content"></div></div>`),window.showpopup=function(e){e.source&&(document.querySelector(".popup-content").innerHTML=e.source),document.getElementById("popup1").style.display="block"},window.closepopup=function(){document.getElementById("popup1").style.display="none"},oProjectDetails.disallow_login_close||document.getElementById("popup1").addEventListener("click",window.closepopup)):setTimeout((()=>{e(t)}),500)}(),localInit.logo&&(HOPLA_login.logo=localInit.logo),localInit.text&&(HOPLA_login.text=localInit.text),localInit.emaildomain&&(HOPLA_login.emaildomain=localInit.emaildomain),localInit.onInvalidEmailDomain&&(HOPLA_login.onInvalidEmailDomain=localInit.onInvalidEmailDomain),localInit.socials&&Array.isArray(localInit.socials)&&(HOPLA_login.socials=localInit.socials),localInit.num_req&&(HOPLA_login.num_req=localInit.num_req),window.onmessage=listener;const t=new URL("https://login.hopla.to/session/index.html");HOPLA_login.projectid&&t.searchParams.set("projectid",HOPLA_login.projectid),HOPLA_login.socials&&t.searchParams.set("socials",encodeURIComponent(JSON.stringify(HOPLA_login.socials))),HOPLA_login.num_req&&t.searchParams.set("num_req",HOPLA_login.num_req),(void 0===localInit.sessionpreview||localInit.sessionpreview)&&document.body.insertAdjacentHTML("beforeend",`<iframe id="hopla_hidden_frame" src="${t.href}" style="width:0;height:0;border:0; border:none;"></iframe>`),"function"==typeof localInit.oninit&&localInit.oninit()},hide:function(){window.closepopup()},refreshToken:function(e){const t=getHoplaFrame();t&&(e&&(HOPLA_login.refreshcallback=e),oMessage={refresh_token:!0},t.contentWindow.postMessage(oMessage,hopla_login_domain))},login,notyou,add_segment:addSegment,add_tag:addTag,push_event:(e,t,n)=>{try{crispPushEvent(t,n),gaPushEvent(e,t,n),fbPushEvent(e,t,n)}catch(e){sendDebugLog({msg:"Failed to send event.",file:"hopla-login.js",error:e.toString()})}},getPopupURL,crisp_addsegment:cispAddSegment,crisp_addtag:cispAddTag,crisp_pushevent:crispPushEvent,ga_pushevent:gaPushEvent,fb_pushevent:fbPushEvent}})(),console.log("HOPLA_login",HOPLA_login),HOPLA_login}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{injectHoplaLogin:()=>injectHoplaLogin})},7731:(e,t,n)=>{"use strict";n.r(t),n.d(t,{injectLogger:()=>o});const{showLastConsoleLog:i}=n(7091);function o(){void 0===window.everything&&(window.everything=[],console.defaultLog=console.log.bind(console),console.log=function(){i(Array.from(arguments).join(" ")),window.everything.push({type:"log",datetime:(new Date).getTime(),value:Array.from(arguments)}),console.defaultLog.apply(console,[(new Date).toLocaleString(),...arguments])},console.defaultError=console.error.bind(console),console.error=function(){i(Array.from(arguments).join(" ")),window.everything.push({type:"error",datetime:(new Date).getTime(),value:Array.from(arguments)}),console.defaultError.apply(console,arguments)},console.defaultWarn=console.warn.bind(console),console.warn=function(){window.everything.push({type:"warn",datetime:(new Date).getTime(),value:Array.from(arguments)}),console.defaultWarn.apply(console,arguments)},console.defaultDebug=console.debug.bind(console),console.debug=function(){window.everything.push({type:"debug",datetime:(new Date).getTime(),value:Array.from(arguments)}),console.defaultDebug.apply(console,arguments)})}},4559:(e,t,n)=>{"use strict";function i(){let e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://fonts.googleapis.com/icon?family=Material+Icons"),document.head.appendChild(e),e=document.createElement("link"),e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://code.getmdl.io/1.3.0/material.indigo-pink.min.css"),document.head.appendChild(e),e=document.createElement("script"),e.setAttribute("src","https://code.getmdl.io/1.3.0/material.min.js"),document.head.appendChild(e),e=document.createElement("script"),e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/dialog-polyfill/0.4.2/dialog-polyfill.min.js"),document.head.appendChild(e),document.head.insertAdjacentHTML("beforeend","<style>\n    #ta .mdl-switch {\n      width: unset;\n    }\n\n    #__next, .MuiPaper-root {\n      width: calc(100% - 370px) !important;\n      left: 0px !important;\n    }\n    </style>"),GM_addElement("script",{src:"https://code.getmdl.io/1.3.0/material.min.js",type:"text/javascript"}),GM_addElement("link",{rel:"stylesheet",href:"https://code.getmdl.io/1.3.0/material.indigo-pink.min.css"}),GM_addElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/dialog-polyfill/0.4.2/dialog-polyfill.min.css"}),GM_addElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),GM_addStyle("\n  #ta .mdl-switch {\n    width: unset;\n  }\n\n  #__next, .MuiPaper-root {\n    width: calc(100% - 370px) !important;\n    left: 0px !important;\n  }")}n.r(t),n.d(t,{injectMdl:()=>i})},3695:(e,t,n)=>{"use strict";function i(){const e=document.createElement("script");e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"),document.head.appendChild(e)}n.r(t),n.d(t,{injectMoment:()=>i})},5729:(e,t,n)=>{"use strict";function i(){const e=document.createElement("style");document.head.append(e),e.textContent=".mdl-list__item.taseparator {\n    border-bottom: solid 1px #e0e0e0;\n  }\n  \n  .mdl-list__item.taseparator .mdl-textfield__input {\n    border-bottom: unset;\n    text-align: right;\n  }\n  \n  .mdl-list__item-secondary-action.tawsmall {\n    width: 45px;\n  }\n  \n  [id^=page] .demo-list-control {\n    margin-top: unset;\n    height: calc(100% - 143px);\n    overflow: auto;\n  }\n  \n  #page2 .demo-list-control {\n    /* margin-top: unset;\n    height: fit-content;\n    overflow: auto; */\n    margin-top: unset;\n    height: calc(100% - 219px);\n    overflow: auto;\n  }\n  \n  #ta .mdl-textfield {\n    width: 100%;\n  }\n  \n  /* #ta .mdl-textfield__label {\n    text-align: center;\n  } */\n  \n  .label {\n    font-weight: 700;\n    margin-right: 10px;\n  }\n  \n  #dialog-bug {\n    width: 400px;\n    height: max-content;\n  }\n  \n  .report-detail {\n    display: flex;\n  }\n  \n  #bugvariantdetails {\n    border: solid 1px;\n    padding: 8px;\n  }\n  \n  \n  .blue {\n    color: blue\n  }\n  .green {\n    color: green\n  }\n  .purple {\n    color: purple\n  }\n  .red {\n    color: red\n  }\n  .bgred {\n    background: red !important;\n  }\n  \n  .buttons_container {\n    display: flex;\n    justify-content: space-around;\n    width: 100%;\n    flex-wrap: wrap;\n  }\n\n  .buttons_container > button {\n    margin-top: 14px;\n  }\n  "}n.r(t),n.d(t,{injectStyle:()=>i})},5658:(e,t,n)=>{"use strict";n.r(t),n.d(t,{injectTrackjs:()=>o});var i=n(6849);function o(){console.log("window.TrackJS",window.TrackJS);try{window.TrackJS&&TrackJS.install({token:"16c187efb05541c6b81bee305e0727d1",application:"facebookbot"}),window.TrackJS.addMetadata("application","facebookbot"),window.TrackJS.track("Testing TrackJS!")}catch(e){console.error(e),(0,i.Z)({error:"Failed to install trackjs",details:e.toString()})}}},642:(e,t,n)=>{"use strict";function i(){document.body.insertAdjacentHTML("afterbegin",'\n  <div id="ta_maximize" style="user-select: none;position: fixed;border: 1px solid;height: 38px;margin-top: -7px;width: 30px;font-size: -webkit-xxx-large;cursor: pointer;background: rgb(63, 81, 181);z-index: 1;right: 0px;align-items: center;justify-content: center;display: block;color: white;">\n    <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 473 473" xml:space="preserve" style="\n        position: absolute;\n        height: 81%;\n        width: 65%;\n        padding: 0px;\n        color: white;\n        fill: white;\n        margin: 5px;\n    ">\n    <g>\n      <g>\n        <path d="M459.5,0H330.4c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5h96.5L218.8,235.1c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4\n          s6.9-1.3,9.5-4L446,46.1v96.5c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5V13.5C473,6,467,0,459.5,0z"></path>\n        <path d="M459.5,231.2c-7.5,0-13.5,6-13.5,13.5v130.9c0,38.8-31.6,70.4-70.4,70.4H97.4C58.6,446,27,414.4,27,375.6V97.4\n          C27,58.6,58.6,27,97.4,27h129.9c7.5,0,13.5-6,13.5-13.5S234.8,0,227.3,0H97.4C43.7,0,0,43.7,0,97.4v278.2\n          C0,429.3,43.7,473,97.4,473h278.2c53.7,0,97.4-43.7,97.4-97.4V244.7C473,237.2,467,231.2,459.5,231.2z"></path>\n      </g>\n    </g>\n    </svg>\n  </div>\n  <div id="ta" style="position: fixed;z-index: 900000;background-color: white;border: solid; right: 0px;width: 370px;\n                  height: 600px; \n                  padding-right: unset;\n                  padding-top: unset;\n                  height: 100%;\n                  top: 0;">\n                <div class="hopla-button" style="display: none;">\n                  <iframe width="345px" height="1000px" data-onlogin="login_callback" title="hopla:login_button HOPLA Plugin" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="https://login.hopla.to/button/button.html" style="border: none; visibility: visible; width: 345px; height: 61px;" class=""></iframe>\n                </div>\n\n                \x3c!-- <div id="taheader" class="menu" style="\n                  display: none;\n                  justify-content: space-around;\n                  font-size: x-large;\n                  padding-bottom: 9px;\n                  padding-top: 9px;\n                  ">\n                    <a id="viewer" href="#" style="\n                    color: black;\n                    text-decoration: underline;\n                    ">Viewer</a>\n                    <a id="offerbot" href="#" style="\n                    color: black;\n                    text-decoration: none;\n                    ">OfferBot</a>\n                </div> --\x3e\n                \x3c!-- MDL Tab Container --\x3e\n                <div id="taheader" class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect" style="height: 100%;">\n                  <div id="info-header" style="display: none; color: white;background: rgb(63,81,181);line-height: 26px;padding: 5px 0px;width: 100%;text-align: center; justify-content: space-around;">\n                  <span id="" style="-webkit-user-select: none;-ms-user-select: none;user-select: none;position: absolute;left: 0px;border: 1px solid;height: 38px;margin-top: -7px;width: 30px;font-size: -webkit-xxx-large;cursor: pointer;">-</span>\n                    <span id="info-subscription"></span>\n                    <span id="info-website"></span>\n                    <span><a id="info-logout" href="#" style="text-decoration: none;color: white;-webkit-highlight: none;">Logout</a></span>\n                  </div>\n                  \x3c!-- Tab Bars --\x3e\n                  <div id="menu" class="mdl-tabs__tab-bar" style="display: none;">\n                      <a href="#page2" class="mdl-tabs__tab is-active" style="width: 100%;">Automate</a>\n                      <a href="#page3" class="mdl-tabs__tab" style="width: 100%;">Content</a>\n                  </div>\n\n                  \x3c!-- <div id="page1" class="mdl-tabs__panel is-active" style="height: 100%;">\n                    <iframe id="taframe" src="https://sell.phones.trade/?model=12pro&amp;storage=128gb&amp;network=unlocked&amp;condition=usedlikenew&a=1" style="\n                      height: 100%;\n                    "></iframe>\n                    <button id="reportbug2" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" style="position: absolute;\n                      bottom: 0px;\n                      left: 50%;\n                      transform: translate(-50%);\n                      z-index: 1;\n                      width: 100%;\n                      display: none;\n                      height: 44px;">\n                        Report a\n                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bug" class="svg-inline--fa fa-bug fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width: 22px;padding-left: 3px;margin-bottom: 3px;"><path fill="currentColor" d="M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758 0 45.255-12.498 12.497-32.759 12.496-45.256 0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v244c-34.351 0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256 0-12.496-12.497-12.496-32.758 0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758 0-45.255 12.498-12.497 32.758-12.497 45.256 0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256 0 12.496 12.497 12.496 32.758 0 45.255L424 197.255V256h56c17.972 0 32.484 14.816 31.988 32.9zM257 0c-61.856 0-112 50.144-112 112h224C369 50.144 318.856 0 257 0z"></path></svg>\n                    </button>\n                  </div> --\x3e\n\n                  <div id="page2" class="mdl-tabs__panel is-active" style="position: relative; height: calc(100% - 83px); display: none;">\n                    <ul class="demo-list-control mdl-list">\n                      <li class="mdl-list__item" style="height: 100px;">\n                          <span class="mdl-list__item-primary-content">\n                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                              <textarea class="mdl-textfield__input" type="text" rows= "3" id="keywords" ></textarea>\n                              <label class="mdl-textfield__label" for="keywords">Keywords</label>\n                            </div>\n                          </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows= "3" id="coordinates" ></textarea>\n                            <label class="mdl-textfield__label" for="coordinates">Latitude,Longitude</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows= "3" id="radius" ></textarea>\n                            <label class="mdl-textfield__label" for="radius">Radius</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows= "3" id="skipwords_title" ></textarea>\n                            <label class="mdl-textfield__label" for="skipwords_title">Skip Words Title</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows= "3" id="skipwords_description" ></textarea>\n                            <label class="mdl-textfield__label" for="skipwords_description">Skip Words Description</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Listing Price Min\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="100" id="listing_min_price" placeholder="0" style="text-align: unset;">\n                            <label class="mdl-textfield__label" for="listing_min_price"></label>\n                          </span>\n                        </span>\n                        <span class="mdl-list__item-primary-content" style="margin-left: 20px;">\n                          Max\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="1000" id="listing_max_price" placeholder="0">\n                            <label class="mdl-textfield__label" for="listing_max_price"></label>\n                          </span>\n                        </span>\n                      </li>\n                      \x3c!-- <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Owner Listings Min\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="1" id="owner_min_lists" placeholder="0" style="text-align: unset;">\n                            <label class="mdl-textfield__label" for="owner_min_lists"></label>\n                          </span>\n                        </span>\n                        <span class="mdl-list__item-primary-content" style="margin-left: 20px;">\n                          Max\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="1" id="owner_max_lists" placeholder="0">\n                            <label class="mdl-textfield__label" for="owner_max_lists"></label>\n                          </span>\n                        </span>\n                      </li> --\x3e\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Bot Mode\n                        </span>\n                        <div>\n                          <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="mode_single">\n                            <input type="radio" id="mode_single" class="mdl-radio__button" name="bot_mode" value="single" checked disabled>\n                            <span class="mdl-radio__label">Single</span>\n                          </label>\n                          <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="mode_multi">\n                            <input type="radio" id="mode_multi" class="mdl-radio__button" name="bot_mode" value="multi" disabled>\n                            <span class="mdl-radio__label">Multi</span>\n                          </label>\n                        </div>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Listing Max Age\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" id="listing_max_age" value=90 placeholder="0">\n                            <label class="mdl-textfield__label" for="listing_max_age"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Listing Price Delta\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="text" id="listing_price_delta" placeholder="0">\n                            <label class="mdl-textfield__label" for="listing_price_delta"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Custom Price Delta\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="text" id="custom_price_delta" placeholder="0">\n                            <label class="mdl-textfield__label" for="custom_price_delta"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Price Round Up/Down\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" id="roundupdown" placeholder="0">\n                            <label class="mdl-textfield__label" for="roundupdown"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Owner Skip Expiry\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" id="ownerskipexpiry" placeholder="days" value="14">\n                            <label class="mdl-textfield__label" for="ownerskipexpiry"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Continue After Storage\n                        </span>\n                        <span class="mdl-list__item-secondary-action">\n                          <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-continue_after_storage">\n                            <input type="checkbox" id="switch-continue_after_storage" class="mdl-switch__input" />\n                          </label>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Continue After Network\n                        </span>\n                        <span class="mdl-list__item-secondary-action">\n                          <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-continue_after_network">\n                            <input type="checkbox" id="switch-continue_after_network" class="mdl-switch__input" />\n                          </label>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px; display: none;">\n                        <span class="mdl-list__item-primary-content">\n                          Send Partner Messages\n                        </span>\n                        <span class="mdl-list__item-secondary-action">\n                          <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-sendpartnermessages">\n                            <input type="checkbox" id="switch-sendpartnermessages" class="mdl-switch__input" />\n                          </label>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="display: none; padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Streak\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="5" id="streak" placeholder="0" style="text-align: unset;">\n                            <label class="mdl-textfield__label" for="streak"></label>\n                          </span>\n                        </span>\n                        <span class="mdl-list__item-primary-content">\n                          Then Timeout\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="15" id="streaktimeout" placeholder="0">\n                            <label class="mdl-textfield__label" for="streaktimeout"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Max Concurrent Conversations\n                        </span>\n                        <span class="mdl-list__item-secondary-action tawsmall">\n                          <span class="mdl-textfield mdl-js-textfield">\n                            <input class="mdl-textfield__input" type="number" value="50" id="maxconcurrentconversations" placeholder="0">\n                            <label class="mdl-textfield__label" for="maxconcurrentconversations"></label>\n                          </span>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        height: 43px;">\n                        <span class="mdl-list__item-primary-content">\n                          Archive After Sending\n                        </span>\n                        <span class="mdl-list__item-secondary-action">\n                          <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-deleteaftersend">\n                            <input type="checkbox" id="switch-deleteaftersend" class="mdl-switch__input" checked />\n                          </label>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item taseparator" style="padding-top: unset !important;\n                        padding-bottom: unset !important;\n                        ">\n                        <div class="buttons_container">\n                          <button id="purge_listings" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent bgred">\n                            Purge Listings\n                          </button>\n                          <button id="purge_owners" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent bgred">\n                            Purge Owners\n                          </button>\n                          <button id="archive_all_threads" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent bgred">\n                            Archive All Threads\n                          </button>\n                        </div>\n                      </li>\n                    </ul>\n                    <div id="status" style="color: white;background: black;line-height: 26px;padding: 5px 0px;position: absolute;bottom: 137px;width: 100%;text-align: center;min-height: 61px;align-items: center;display: flex;justify-content: center; z-index: 1">\n                        <span id="statustext" style="\n                    "></span></div>\n                    \n\n\n                    <div id="stats" style="color: white;background: rgb(63,81,181);line-height: 26px;padding: 5px 0px;position: absolute;bottom: 49px;width: 100%;text-align: center;">\n                    <span>Today\'s Stats </span>\n                    <div style="\n                      display: flex;\n                      justify-content: space-evenly;\n                    ">\n                      <span><span id="stat_scraped">0</span> scraped </span>\n                      <span><span id="stat_new_listings">0</span> new </span>\n                      <span><span id="stat_single_listings">0</span> single</span>\n                      <span><span id="stat_multi_listings">0</span> multi</span>\n                    </div>\n                    <div style="\n                      display: flex;\n                      justify-content: space-evenly;\n                    ">\n                      <span><span id="stat_offers">0</span> offers</span>\n                      <span><span id="stat_runs">0</span> runs </span>\n                      <span><span id="stat_streaks">0</span> streak</span>\n                      <span><span id="stat_ko">0</span> KO</span>\n                    </div>\n                  </div>\n\n\n\n                    <div class="footer" style="\n                      justify-content: space-around;\n                      display: flex;\n                      position: absolute;\n                      bottom: 5px;\n                      width: 100%; align-items: center;\n                      border-top: solid 1px;\n                      border-top-color: #e0e0e0;\n                      height: 44px;\n                      padding-right: 10px;\n                      ">\n                      <span>Run From</span>\n                      <input id="runfrom" type="time" style="width: unset;font-size: 16px;font-family: Lato,&quot;Helvetica Neue&quot;,Arial,sans-serif;font-weight: 400;" class="mdl-textfield__input" value="09:00">\n                      <span>Until</span>\n                      <input id="rununtil" type="time" style="width: unset;font-size: 16px;font-family: Lato,&quot;Helvetica Neue&quot;,Arial,sans-serif;font-weight: 400;" class="mdl-textfield__input" value="18:00">\n                      <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-rununtil">\n                        <input type="checkbox" id="switch-rununtil" class="mdl-switch__input">\n                        <span class="mdl-switch__label"></span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div id="page3" class="mdl-tabs__panel" style="\n                    height: calc(100% - 83px);\n                    overflow: hidden auto;\n                    position: relative;\n                    display: none;">\n                    <div id="page2loading" class="mdl-spinner mdl-js-spinner is-active" style="position: absolute;left: 50%;top: 30%; display:none;"></div>\n                    <ul class="demo-list-control mdl-list">\n                      <li class="mdl-list__item" style="height: 100px;">  \n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="openermessage" ></textarea>\n                            <label class="mdl-textfield__label" for="openermessage">Opener Message</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="question_1" ></textarea>\n                            <label class="mdl-textfield__label" for="question_1">Question 1</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="question_2" ></textarea>\n                            <label class="mdl-textfield__label" for="question_2">Question 2</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="gbmessage" ></textarea>\n                            <label class="mdl-textfield__label" for="gbmessage">GB Message</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="networkmessage" ></textarea>\n                            <label class="mdl-textfield__label" for="networkmessage">Network Message</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="question_3" ></textarea>\n                            <label class="mdl-textfield__label" for="question_3">Question 3</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="question_4" ></textarea>\n                            <label class="mdl-textfield__label" for="question_4">Question 4</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="lowball_message" ></textarea>\n                            <label class="mdl-textfield__label" for="lowball_message">Lowball</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="offermessage" ></textarea>\n                            <label class="mdl-textfield__label" for="offermessage">Offer Message</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 100px;">\n                        <span class="mdl-list__item-primary-content">\n                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <textarea class="mdl-textfield__input" type="text" rows="3" id="meetupmessage" ></textarea>\n                            <label class="mdl-textfield__label" for="meetupmessage">Meetup Message</label>\n                          </div>\n                        </span>\n                      </li>\n                      <li class="mdl-list__item" style="height: 60px; display: none;">\n                        <span class="mdl-list__item-primary-content">\n                          <span class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                            <input class="mdl-textfield__input" type="text" id="partnermessage">\n                            <label class="mdl-textfield__label" for="partnermessage">Partner Message</label>\n                          </span>\n                        </span>\n                      </li>\n                    </ul>\n                    <div class="variables" style="padding-bottom: 10px; position: absolute;\n                    bottom: 55px;\n                    padding: 0px 16px;">\n                        <span style="display: block;">Available Variables:</span>\n                        <span class="variable">[name]</span>\n                        <span class="variable">[model]</span>\n                        <span class="variable">[network]</span>\n                        <span class="variable">[memory]</span>\n                        <span class="variable">[price]</span>\n                        <span class="variable">[listing_price]</span>\n                        <span class="variable">[deductions]</span>\n                        <span class="variable">[condition]</span>\n                        \x3c!-- <span class="variable">[quote_link]</span>\n                        <span class="variable">[pickup_link]</span> \n                        <span class="variable">[partner_link]</span> \n                        <span class="variable">[website]</span> --\x3e\n                    </div>\n                    <div class="template-actions" style="\n                      justify-content: space-between;\n                      display: flex;\n                      position: absolute;\n                      bottom: 0px;\n                      width: 100%;\n                    ">\n                      <button id="test_template" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect"\n                        style="width: 50%;\n                        margin-right: 1px;\n                        height: 44px;">\n                        Test\n                      </button>\n                      <button id="restore_defaults" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect"\n                        style="width: 50%;\n                        height: 44px;">\n                        Restore Defaults\n                      </button>\n                    </div>\n                  </div>\n                  \n                </div>\n\n                \n                <dialog id="dialog-bug" class="mdl-dialog">\n                  <h4 class="mdl-dialog__title">Bug Report</h4>\n                  <div class="mdl-dialog__content">\n                    <div id="buglistingdetails">\n                    </div>\n                    <div>\n                        <br>\n                        <p>Based on the info above. The bot determined that the phone variant is:</p>\n                        <div id="bugvariantdetails">\n                        </div>\n                      </div>\n                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">\n                      <textarea class="mdl-textfield__input" type="text" rows= "3" id="bugcomment" ></textarea>\n                      <label class="mdl-textfield__label" for="bugcomment">Bug Details</label>\n                    </div>\n                  </div>\n                  <div class="mdl-dialog__actions">\n                    <button type="button" class="mdl-button sendbug">Submit</button>\n                    <button type="button" class="mdl-button close">Close</button>\n                  </div>\n                </dialog>\n              </div>')}n.r(t),n.d(t,{insertUI:()=>i})},5779:(e,t,n)=>{"use strict";function i(){return new Promise((e=>{const t=new BroadcastChannel("ht_tab_monitor");t.onmessage=n=>{const i=n.data;if(i&&i.message){if("isinjected"===i.message)return t.postMessage({message:"reply-injected"});if("reply-injected"===i.message)return e(!0)}},t.postMessage({message:"isinjected"}),setTimeout((()=>{e(!1)}),1e3)}))}n.r(t),n.d(t,{isInjectedToOtherTab:()=>i})},5038:(e,t,n)=>{"use strict";n.r(t),n.d(t,{loadInputs:()=>a});var i=n(1334),o=n(4423),s=n(3624);async function a(){let e=!1;const t=await(0,i.FF)();for(const n of t)if(n.startsWith("input_")){const t=n.replace("input_",""),s=await(0,i.gI)(n),a=document.getElementById(t);a&&("checkbox"===a.type?"switch-rununtil"===t?((0,o.o)(!0),e=!0,a.checked="true"===s):a.checked="true"===s:(a.value=s,r(a)))}else if(n.startsWith("radio_")){const e=n.replace("radio_",""),t=await(0,i.gI)(n);let o=document.getElementsByName(e);if(o&&(o=o[0],r(o),"radio"===o.type)){const e=document.getElementById(t);e&&(0,s.B)(e).then((()=>{e.parentNode.MaterialRadio.check()}))}}e||(0,o.o)(!0)}function r(e){if("createEvent"in document){const t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange");e.parentElement&&e.parentElement.MaterialTextfield&&e.parentElement.MaterialTextfield.change(e.value)}},4219:(e,t,n)=>{"use strict";n.r(t),n.d(t,{loadStats:()=>s});var i=n(1334),o=n(9171);async function s(){const e=new Date,t=`${e.getFullYear()}${e.getMonth()+1}${e.getDate()}`;let n=await(0,i.gI)(`stats_${t}`);if(n){n=JSON.parse(n);const e=["offers","partners","runs","streaks","ko","new_listings","single_listings","multi_listings"],t={};["offers","partners","runs","streaks","ko","scraped","new_listings","single_listings","multi_listings"].forEach((e=>{e in n&&(document.getElementById(`stat_${e}`).textContent=n[e])})),e.forEach((e=>{e in n&&("ko"===e?t.KO=n[e]:t[e]=n[e])})),(0,o._)(t)}}},1992:(e,t,n)=>{"use strict";n.r(t),n.d(t,{logout:()=>o});var i=n(147);function o(){HOPLA_login.notyou((function(e){(0,i.login_callback)(e)}))}},1463:(e,t,n)=>{"use strict";n.r(t),n.d(t,{maxConvoCheck:()=>l});var i=n(1203),o=n(3539),s=n(4246),a=n(7367),r=n(3542);async function l(e){if(!unsafeWindow.isRun)return void console.log("maxConvoCheck !unsafeWindow.isRun");if(e!==unsafeWindow.runningInstanceId)return void console.log("maxConvoCheck instanceId !== unsafeWindow.runningInstanceId");const t=document.getElementById("maxconcurrentconversations").value;if(t){const n=await(0,r.fetchInboxThreads)(),c=n.length;if(n&&(await(0,a.stats)()).setThreadsCount(c),c>=t)return console.log("max convo reached!"),window.maxConvoReached||(window.maxConvoReached=!0,(0,o.CONSOLE_MESSAGE)("halted_threads")),await(0,s.sleep)(1e3*i.intervalConversationsCheck),l(e);window.maxConvoReached=!1}}},9485:(e,t,n)=>{"use strict";function i(){console.log("onMaximize");const e=document.querySelector("#ta_maximize");e&&(e.style.display="none");const t=document.querySelector("#ta");t&&(t.style.display="block")}function o(){console.log("onMinimize");const e=document.querySelector("#ta_maximize");e&&(e.style.display="flex");const t=document.querySelector("#ta");t&&(t.style.display="none")}n.d(t,{E:()=>i,g:()=>o})},147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{login_callback:()=>u,onSessionReady:()=>d});var i=n(1334),o=n(3539),s=n(8414),a=n(1992),r=n(9485),l=n(9971),c=n(3624);function d(e){if(console.log("User Details",HOPLA_login.user),console.log("You are logged in as ",HOPLA_login.user.uid),showLoading(!1),e.isAnonymous){const e=document.querySelector(".hopla-button");e&&(e.style.display="block")}else u(e)}function u(e){let t=document.querySelector(".hopla-button");t&&(t.style.display="none"),t=document.querySelector("#ta #menu"),t&&(t.style.display="flex"),t=document.querySelector("#ta #page2"),t&&(t.style.display=null),t=document.querySelector("#ta #page3"),t&&(t.style.display=null),componentHandler&&componentHandler.upgradeDom();const n=e&&e.uid;n&&async function(e){const t=await fetch(`https://us-central1-trade-apples.cloudfunctions.net/partners?isTeammember=1&uid=${e}`).then((e=>e.json()));let n=t&&t.isTeamMember&&t.isTeamMember.partnerId;return n||(n=e),n}(n).then((t=>{window.taPartnerId=t,window.taEmail=e&&e.email,(0,s.getPartnerDetails)(t).then((async e=>{if(e.error)return console.error(e.error),void p(e,!1);window.taUID=n,window.var_domain=e&&e.partner_details&&e.partner_details.website&&e.partner_details.website.domain,window.var_domain||(window.var_domain=""),window.taEmail||(window.taEmail=e&&e.partner_details&&e.partner_details.email),window.TrackJS&&window.taEmail&&window.TrackJS&&window.TrackJS.configure({userId:window.taEmail}),p(e,n!==t)}))})),document.getElementById("taheader").style.display="block",document.getElementById("taheader").style.height="100%"}async function p(e,t){(0,o.CONSOLE_MESSAGE)("custom","");let n=function(e){return e&&e.subscription_details&&e.subscription_details.business&&"active"===e.subscription_details.business.status?"Business":e&&e.subscription_details&&e.subscription_details.trader&&"active"===e.subscription_details.trader.status?"Trader":""}(e);!n&&t&&(n="Team Member");const s=document.querySelector("#info-header");s&&(s.style.display="flex");const d='<a id="info-logout" href="#" style="color: white;-webkit-highlight: none;">Logout</a>';if(!n)return window.isAllowed=!1,void(s&&(s.innerHTML=`<span> <a target="_blank" href="https://phones.trade/join-us/">Subscribe here</a> to use this bot or ${d}</span>`));window.isAllowed=!0,"true"===await(0,i.gI)("input_switch-rununtil")&&(0,l.O)(),s&&(s.innerHTML=`\n  <span id="ta_minimize" style="-webkit-user-select: none;-ms-user-select: none;user-select: none;position: absolute;left: 0px;border: 1px solid;height: 38px;margin-top: -7px;width: 30px;font-size: -webkit-xxx-large;cursor: pointer;">\n  -\n  </span>\n  <span id="info-subscription"></span>\n    <span id="info-website"></span>\n    <span>${d}</span>`);let u=document.querySelector("#info-subscription");if(u&&(u.textContent=n),u=document.querySelector("#info-website"),u&&(u.textContent=window.var_domain),"Business"===n){let e=document.getElementById("mode_multi");e&&(e.disabled=!1,(0,c.B)(e).then((e=>{e.parentNode.MaterialRadio.checkDisabled()}))),e=document.getElementById("mode_single"),e&&(e.disabled=!1,(0,c.B)(e).then((e=>{e.parentNode.MaterialRadio.checkDisabled()})))}document.querySelector("#info-logout").addEventListener("click",(()=>{(0,a.logout)()})),document.querySelector("#ta_minimize").addEventListener("click",(()=>{(0,r.g)()}))}},9107:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});var i=n(9178);function o(e,t){return e&&t?t.includes("%")?(t=t.replace(/[^\d\.-]/g,""),e+e*((t=Number(t))/100)):(t=t.replace(/[^\d\.-]/g,""),e+(t=Number(t))):e}function s(e,t,n,s){let a=e,r=t&&t.model;r||(r="");let l=t&&t.network;l?l.toLowerCase().startsWith("locked")&&(l="Locked"):l="";let c=t&&t.storage;c||(c="");let d=t&&t.price;d||(d="");let u="";if(t&&t.condition)try{u=t.condition.split("-")[1],u=u.trim(),u=(0,i.M)(u)}catch(e){u=t.condition.split("-")[0],u=u.trim(),u=(0,i.M)(u)}let p="no deductions";t&&t.deductions&&t.deductions.length&&(p=t.deductions.join(", "));const m=document.querySelector("#custom_price_delta").value||0,g=document.querySelector("#listing_price_delta").value||0;a=a.replace(/\[model\]/g,r),a=a.replace(/\[network\]/g,l),a=a.replace(/\[memory\]/g,c),a=a.replace(/\[name\]/g,n.split(" ")[0]);let _,w=a.match(/\[price\s?-\s?(\d+)\]/);if(d&&w&&w.length>1){const e=parseFloat(w[1]);let t=d-parseFloat(e);t<0&&(t=0),a=a.replace(/\[price\s?-\s?\d+\]/,`$${t}`)}else if(d&&a.match(/\[price\]/)){let e=d;m&&(e=o(d,m));let t=document.getElementById("roundupdown").value;t&&(t=parseFloat(t)),e=function(e,t){if(!t)return e;const n=t>0?Math.ceil(e/Math.abs(t)):Math.floor(e/Math.abs(t));return Math.abs(n*t)}(e,t),e<0&&(e=0),a=a.replace(/\[price\]/,`$${e}`)}else a=a.replace(/\[price\s?-\s?\d+\]/,""),a=a.replace(/\[price\]/,"");if(w=a.match(/\[listing_price\s?-\s?(\d+)\]/),void 0!==s&&w&&w.length>1){const e=parseFloat(w[1]);let t=s-parseFloat(e);t<0&&(t=0),a=a.replace(/\[listing_price\s?-\s?\d+\]/,`$${t}`)}else if(void 0!==s&&a.match(/\[listing_price\]/)){let e=s;g&&(e=o(e,g)),e<0&&(e=0),a=a.replace(/\[listing_price\]/,`$${e}`)}else a=a.replace(/\[listing_price\s?-\s?\d+\]/,"your price");return window.partner_link?_=window.partner_link:t.partner_link&&(window.partner_link=t.partner_link,_=t.partner_link),a=a.replace(/\[condition\]/g,u),a=a.replace(/\[deductions\]/g,p),a}},7850:(e,t,n)=>{"use strict";function i(e){if(e.target.id&&"number"===e.target.type){let t=e.target.value;"0"===t||t.startsWith("-")||(e.target.value=`-${t}`)}}n.r(t),n.d(t,{prefix:()=>i})},9160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{processKeyword:()=>M});var i=n(9088),o=n(1203),s=n(13),a=n(3539),r=n(8521),l=n(6901),c=n(1060);n(9105);var d=n(7367);async function u(e,t,n,i,o,s){(0,a.CONSOLE_MESSAGE)("custom",`Checking qualifying listings of ${n} (${t}).`,o);const r=s&&s.length;if((0,a.CONSOLE_MESSAGE)("custom",`Found ${r} listings of ${n} (${t}).`,o),void 0!==r){const t="single"===document.querySelector("[name=bot_mode]:checked").value,s=t?"Single":"Multi";if(console.log(`Mode ${s}. ${n} has ${r} qualifying listings. All listings will be added to ${s} Skip List`),r<=3?(await(0,d.stats)()).addSingleListings():(await(0,d.stats)()).addMultiListings(),(await(0,d.stats)()).addNewListings(),t){if(r<=3)return!0}else if(r>3)return!0;return(0,a.CONSOLE_MESSAGE)("has_listings",{owner_lists:r,listing_id:e,owner_name:n,listing_name:i},o),!1}}var p=n(3177),m=n(9688),g=n(4087),_=n(175),w=n(2320),h=n(1439);function f(e,t){let n=!1;return e.includes("[model]")&&!t.model&&(console.log("Failed. No model",e,t),n=!0),e.includes("[network]")&&!t.network&&(console.log("Failed. Network",e,t),n=!0),e.includes("[memory]")&&!t.storage&&(console.log("Failed. No memory",e,t),n=!0),n}var y=n(9107),b=n(2617),x=n(2287),v=n(4246),S=n(8329);async function k(e,t){let n=!1;if(!unsafeWindow.isRun)return void console.log("bot stopped.");if(t!==unsafeWindow.runningInstanceId)return;const i=e.id,s=e.title,l=e.seller.id,c=e.seller.name,u=await(0,h.getVariant)(i,e);if(console.log("variant",u),u.skip)return void await(0,r.skips)().saveToSkipListing(i);const m=await(0,w.getQuote)(u,i);console.log("variantQuote",m);let k,E="",L="",O=await(0,S.z)().openermessage;if(O&&!f(O,u)){O=(0,y.e)(O,m,c,u.listing_price),console.log("will send message",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="openermessage"}if(O=await(0,S.z)().question_1,O&&!f(O,u)){O=(0,y.e)(O,m,c,u.listing_price),console.log("Will send question1",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="question_1"}if(O=await(0,S.z)().question_2,O&&!f(O,u)){O=(0,y.e)(O,m,c,u.listing_price),console.log("Will send question2",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="question_2"}let M,I=!1,A=!1,q=!1;if(!u.storage){I=!0,O=await(0,S.z)().gbMessage,O=(0,y.e)(O,m,c,u.listing_price),console.log("Will send gbMessage",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="gbMessage"}if(I&&!document.querySelector("#switch-continue_after_storage").checked&&(q=!0),!q&&!u.network){A=!0,O=await(0,S.z)().networkMessage,O=(0,y.e)(O,m,c,u.listing_price),console.log("Will send networkMessage",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="networkMessage"}if(A&&!document.querySelector("#switch-continue_after_network").checked&&(q=!0),O=await(0,S.z)().question_3,O&&!f(O,u)){O=(0,y.e)(O,m,c,u.listing_price),console.log("Will send question_3",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="question_3"}if(O=await(0,S.z)().question_4,O&&!f(O,u)){O=(0,y.e)(O,m,c,u.listing_price);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="question_4"}if(m.price>u.listing_price?(M="Offer message sent.",O=await(0,S.z)().offerMessage):(M="Lowball message sent.",O=await(0,S.z)().lowball_message),O=(0,y.e)(O,m,c,u.listing_price),!q&&O&&!f(O,u)){E&&(E+="\n"),console.log("will send offer message",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E+=O,L&&(L+=", "),L+="accept/offerMessage"}if(O=await(0,S.z)().meetupMessage,O=(0,y.e)(O,m,c,u.listing_price),!q&&O&&!f(O,u)){console.log("will send meetup message",O);const e=await(0,g.api_sendMessage)(i,O);if("STOP"===e)return void console.log("Stopped sending messages to user because other user is blocked.");if(e.error)return void console.log(e.error);n=!0,k||(k=e),(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:O,listing_price:u.listing_price,listing_id:i,listing_name:s},t);const r=1e3*(0,p.l)(o.messageDelay[0],o.messageDelay[1]),l=(new Date).getTime()+r;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Message Sent",hh:moment(l).format("HH"),mm:moment(l).format("mm"),ss:moment(l).format("ss")},t),await(0,v.sleep)(r),E&&(E+="\n"),E+=O,L&&(L+=", "),L+="meetupMessage"}if(k&&(k.thread_id&&(k=k.thread_id),document.querySelector("#switch-deleteaftersend").checked)){console.log("Deleting conversation",k);const e=await(0,_.changeArchivedStatus)(k,!0);e&&e.success?console.log("Conversation has been deleted:",k):console.error("Failed to delete conversation",k)}return window.messagesSent+=1,(await(0,d.stats)()).addOffer(),(await(0,d.stats)()).addStreak(),await async function(e){if(o.disableLogs)return;const{uid:t,ownerName:n,listingid:i,message:s,templateName:a}=e,r={Date:(new Date).toGMTString(),UserID:t,Name:n,ListingID:i,"Message Sent":s,template:a,tabId:window.tabId,extension_version:window.extension_version},l=(0,b.g)();return l&&(r.email=l),async function e(t){return fetch("https://sheets.hopla.tools/?HT=9ec6989caf07d1305c6c386880840f8a&mode=log&sheet_name=FacebookBot",{method:"POST",body:JSON.stringify(r)}).then((async e=>(0,x.handleFetchErrors)(e))).then((e=>e.text())).catch((async n=>(console.error("Fetch Failed (sendBotLog)",n,t),t&&t>6?"":(await(0,v.sleep)(1e4),t||(t=0),e(t+=1)))))}().catch((e=>(console.error("Fetch Failed (sendBotLog))",e),"")))}({uid:l,ownerName:c,listingid:i,message:E,templateName:L}),!!n&&E}async function E(){const e=document.getElementById("streak").value,t=document.getElementById("streaktimeout").value;if(e&&t&&window.iStreaks>=e){const e=(new Date).getTime()+60*t*1e3;(0,a.CONSOLE_MESSAGE)("timeout",{message:"Streak",hh:moment(e).format("HH"),mm:moment(e).format("mm"),ss:moment(e).format("ss")}),await(0,v.sleep)(60*t*1e3),(await(0,d.stats)()).resetCurrentStreak()}}var L=n(9237),O=n(5639);async function M(e,t,n){if(!window.isAllowed)return console.error("You are not allowed to use this bot! x("),"not-allowed";await(0,a.getConsoleMessages)(),await new Promise((e=>{!function t(){if("complete"===document.readyState)return e();setTimeout(t,30)}()})),(0,a.CONSOLE_MESSAGE)("fetching_listings",{keyword:e},t);const g={keyword:e,radius:document.getElementById("radius").value||"65"};n&&(g.lat=n.lat,g.lon=n.lon);const _=document.querySelector("#listing_max_price").value,w=document.querySelector("#listing_min_price").value;_&&(g.priceMax=_),w&&(g.priceMin=w);let h,f,y,b,x=await(0,m.searchListings)(g);if(console.log("aListings",x),(0,a.CONSOLE_MESSAGE)("fetch_listings",{num_listings:x.length,keyword:e},t),x.errorDescription)return(0,a.CONSOLE_MESSAGE)("custom","Failed to get listings. API has failed."),void await(0,v.sleep)(864e5);if(x&&Array.isArray(x)&&(await(0,d.stats)()).addTotalListingsScraped(x),h=x.length,f=[...x],x=function(e){const t=document.querySelector("#ta #keywords").value,n=e.length,i=(e=e.filter((e=>{const n=e.title;if(!n)return!1;const i=t.split(",").map((e=>e.trim())).join("|"),o=new RegExp(i,"i");return!!n.match(o)}))).length;return i!==n&&(0,a.CONSOLE_MESSAGE)("skip_no_keyword",{num_listings:n-i}),e}(x),y=[...x],b=x.length,b!==h&&((0,a.CONSOLE_MESSAGE)("custom",`Filtered out ${h-b} listings that didn't have keyword in title.`),window.debug&&alert(`Filtered out ${h-b} listings that didn't have keyword in title.`)),h=x.length,f=[...x],x=await async function(e){const t=e.length,n=[];for(const t of e){const e=t.title,i=await(0,c.$)(e);i&&console.log("containsSkipWord",e),i||n.push(t)}const i=(e=n).length;return i!==t&&(0,a.CONSOLE_MESSAGE)("custom",`Skipped ${t-i} containing skip word.`),e}(x),b=x.length,y=[...x],b!==h){(0,a.CONSOLE_MESSAGE)("custom",`Filtered out ${h-b} listings that had skip words in title.`);const e=function(e,t,n){const i=e.map((e=>e.id)),o=t.map((e=>e.id)),s=i.filter((e=>!o.includes(e))),a=e.filter((e=>s.includes(e.id)));return a.map((e=>e.title))}(f,y),t=e.join("\n");window.debug&&(console.log("Removed Titles",t),alert(`Filtered out ${h-b} listings that had skip words in title.`))}h=x.length,"single"===document.querySelector("[name=bot_mode]:checked").value&&(x=function(e){const t={},n={},i=[],o=[];for(const i of e){const e=i.seller&&i.seller.id;e&&(t[e]||(t[e]=0),t[e]++,n[e]||(n[e]=[]),n[e].push(i))}for(const e in t)1===t[e]&&(i.push(e),o.push(n[e][0]));return o}(x),window.debug&&alert(`Filtered out ${h-x.length} listings that were posted by users with more than 1 listing.`)),b=x.length,b!==h&&((0,a.CONSOLE_MESSAGE)("custom",`Filtered out ${h-b} listings that are sold by seller with multiple posts.`),window.debug&&alert(`Filtered out ${h-b} listings that are sold by seller with multiple posts.`)),h=x.length,x=(0,l.filterOutListingsNotInPriceRange)(x),b=x.length,b!==h&&((0,a.CONSOLE_MESSAGE)("custom",`Filtered out ${h-b} listings that are not in price range.`),window.debug&&alert(`Filtered out ${h-b} listings that are not in price range.`)),h=x.length,x=await async function(e){const t=e.length,n=[],i=[];for(const t of e){const e=t.id,o=(0,r.skips)().isSkipListing(e).then((e=>{e||n.push(t)}));i.push(o)}await Promise.all(i);const o=n.length;return o!==t&&console.log(`Filtered out ${t-o} of ${t} skipped listings.`),n}(x),b=x.length,b!==h&&((0,a.CONSOLE_MESSAGE)("custom",`Filtered out ${h-b} listings that were in skip list.`),window.debug&&alert(`Filtered out ${h-b} listings that were in skip list.`)),h=x.length,x=await async function(e){const t=e.length,n=[],i=[];for(const t of e){const e=t.id,o=t&&t.seller&&t.seller.id;if(!o){console.log("listingData",t),console.error(`Failed to get sellerId of listing ${e}!`);continue}const s=t&&t.seller&&t.seller.name,l=(0,r.skips)().isSkipMessagedUser(o).then((l=>{l?(console.log("User is already messaged.",o),i.push((0,r.skips)().saveToSkipListing(e)),(0,a.CONSOLE_MESSAGE)("already_messaged",{owner_id:o,owner_name:s,listing_id:e,listing_name:t.title})):n.push(t)}));i.push(l)}await Promise.all(i);const o=n.length;return o!==t&&console.log(`Filtered out ${t-o} of ${t} messaged sellers.`),n}(x),b=x.length,b!==h&&((0,a.CONSOLE_MESSAGE)("custom",`Filtered out ${h-b} listings that were messaged before.`),window.debug&&alert(`Filtered out ${h-b} listings that were messaged before.`));const S=x.length;console.log("Listings left after filtering:",S),window.debug&&alert("Listings left after filtering: "+S);for(let e=0;e<S;e++){if(window.listingsChecked||(window.listingsChecked=0),window.listingsChecked+=1,window.listingsChecked>o.listingsPerKeyword)return window.listingsChecked=0,"listingsPerKeyword reached.";if(!unsafeWindow.isRun)return void console.log("Bot stopped.");if(t!==unsafeWindow.runningInstanceId)return;const n=x[e]&&x[e].id,l=x[e]&&x[e].title;if(!n){console.error("listing has no id");continue}const d=await(0,s.fetchListingDetails)({id:n});if(d.error){if(console.error("Failed to get listing details.",d.error),"rate_limit_exceeded"===d.error_code){window.isKO=!0;const e=(new Date).getTime()+60*o.waitIfSpamDetected*1e3,t=moment(e).calendar();(0,a.CONSOLE_MESSAGE)("halted_soft",{schedule:t}),await(0,v.sleep)(60*o.waitIfSpamDetected*1e3),window.isKO=!1}continue}0===Object.keys(d).length&&console.log("LISTING SKIPPED - no listing data.",n);const m=d.description;if(m&&await(0,c.P)(m)){(0,a.CONSOLE_MESSAGE)("skipword_found",{listing_name:l,listing_id:n},t),await(0,r.skips)().saveToSkipListing(n);continue}if(d.creationTime){const e=document.getElementById("listing_max_age");if(e){const t=e.value,n=(0,L.f)(d.creationTime);if(n>t){console.log("SKIPPED OLD LISTING.",n,"days old"),(0,a.CONSOLE_MESSAGE)("skip_old_listing",{age:n,listing_id:d.id,listing_name:d.title});continue}}}const g=d&&d.seller&&d.seller.id,_=d&&d.seller&&d.seller.name,w=await(0,O.getUserListings)(g,!0);if(!await u(n,g,_,l,"",w)){console.log(`User ${_} (${g}) number of listings not in range.`),await(0,r.skips)().saveToSkipListing(n),await(0,i.addAllUserListingsToSkipList)(g,_,w);continue}const h=await k(d,t);if(h){const e=d.price;(0,a.CONSOLE_MESSAGE)("message_sent",{message_sent:h,listing_price:e,listing_id:n,listing_name:l},t),console.log(`User ${_} (${g}) has just been sent a message.`),await(0,r.skips)().saveToSkipListing(n),await(0,i.addAllUserListingsToSkipList)(g,_,w),await(0,r.skips)().saveToMessagedUsers(g);const s=1e3*(0,p.l)(o.userDelay[0],o.userDelay[1]),c=(new Date).getTime()+s;(0,a.CONSOLE_MESSAGE)("timeout",{message:`Finished sending all messages to ${_} (${g}).`,hh:moment(c).format("HH"),mm:moment(c).format("mm"),ss:moment(c).format("ss")},t),await(0,v.sleep)(s)}await E()}return console.log("no more new results available"),"no more results"}},4053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{processWriteQueue:()=>s});var i=n(2287),o=n(6849);async function s(){window.writeQueue||(window.writeQueue=[]);const e=[...window.writeQueue];window.writeQueue=[];for(const t of e)try{let e=await fetch("https://us-central1-trade-apples.cloudfunctions.net/markplacebotstats",{method:"POST",headers:{"Content-Length":"application/json"},body:JSON.stringify(t)}).then((async e=>(0,i.handleFetchErrors)(e))).then((e=>e.text())).catch((e=>{console.log(e)}));"ok"!==e&&(0,o.Z)({error:"Failed to write to dashboard",data:t,sheetsApiResponse:e})}catch(e){console.error(e),(0,o.Z)({error:"Failed to write to dashboard3",data:t})}setTimeout((()=>{s()}),2e3)}},3177:(e,t,n)=>{"use strict";function i(e,t){return Math.floor(Math.random()*(t-e+1)+e)}n.d(t,{l:()=>i})},7480:(e,t,n)=>{"use strict";n.r(t),n.d(t,{readCoordinates:()=>o});var i=n(1334);async function o(){let e=document.getElementById("coordinates").value;if(!e)return;if(!String(e).includes(","))return;const t=e.split("\n").map((e=>e.replace(/\s/g,""))).filter((e=>e.length));let n=await(0,i.gI)("lastCoordIdx");n=n||0===n?parseInt(n,10)+1:0,n>=t.length&&(n=0),await(0,i.Q5)("lastCoordIdx",n);let o=t[n].split(","),s=o[0],a=o[1];return s&&a&&(s=parseFloat(s),a=parseFloat(a),s&&a)?{lat:s,lon:a}:void 0}},1063:(e,t,n)=>{"use strict";n.r(t),n.d(t,{restoreDefaults:()=>l});var i=n(1203),o=n(2287),s=n(6849),a=n(4246);async function r(){const e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=Content`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text()));if(e&&!e.includes("opener"))return r();try{return JSON.parse(e)}catch(t){return await(0,s.Z)({error:"Failed to getDefaultContent. sheets.hopla.tools api response.",res:e}),{}}}function l(){function e(e){if("createEvent"in document){const t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange");e.parentElement&&e.parentElement.MaterialTextfield&&e.parentElement.MaterialTextfield.change(e.value)}document.getElementById("page2loading").style.display="block",async function(){const e=await fetch(`https://sheets.hopla.tools/?HT=${i.sheet_id}&format=json&sheet_name=Settings`).then((async e=>(0,o.handleFetchErrors)(e))).then((e=>e.text()));if(e&&!e.includes("keywords"))return r();try{return JSON.parse(e)}catch(t){return await(0,s.Z)({error:"Failed to getDefaultSettings. sheets.hopla.tools api response.",res:e}),{}}}().then((t=>{if(document.getElementById("page2loading").style.display="none",t.result&&Array.isArray(t.result)&&t.result.length){const n={};t.result.forEach((e=>{n[e.input_name]=e.value}));const i=n.keywords||"",o=n.skip_words_title||"",s=n.skip_words_description||"",a=n.listing_min_price||"",r=n.listing_max_price||"",l=n.listing_max_age||"",d=n.listing_price_delta||"",u=n.price_rounding||"",p=n.custom_price_delta||"",m=n.continue_after_storage||"",g=n.continue_after_network||"";let _=document.querySelector("#keywords");_.value=i,e(_),_=document.querySelector("#skipwords_title"),_.value=o,e(_),_=document.querySelector("#skipwords_description"),_.value=s,e(_),_=document.querySelector("#listing_min_price"),_.value=a,e(_),_=document.querySelector("#listing_max_price"),_.value=r,e(_),_=document.querySelector("#listing_max_age"),_.value=l,e(_),_=document.querySelector("#listing_price_delta"),_.value=d,e(_),_=document.querySelector("#custom_price_delta"),_.value=p,e(_),_=document.querySelector("#roundupdown"),_.value=u,e(_),_=document.querySelector("#switch-continue_after_storage"),c(_).then((e=>{"TRUE"===m?e.parentNode.MaterialSwitch.on():e.parentNode.MaterialSwitch.off()})),_=document.querySelector("#switch-continue_after_network"),c(_).then((e=>{"TRUE"===g?e.parentNode.MaterialSwitch.on():e.parentNode.MaterialSwitch.off()}))}})).catch((e=>(console.error("Fetch Failed",e),(0,a.sleep)(1e4).then((()=>l()))))),r().then((t=>{if(document.getElementById("page2loading").style.display="none",t.result&&Array.isArray(t.result)&&t.result.length){const n={};t.result.forEach((e=>{n[e.input_name]=e.value}));const i=n.opener||"",o=n.question_1||"",s=n.question_2||"",a=n.storage_message||"",r=n.network_message||"",l=n.question_3||"",c=n.question_4||"",d=n.lowball||"",u=n.offer||"",p=n.meetup||"";let m=document.querySelector("#openermessage");m.value=i,e(m),m=document.querySelector("#question_1"),m.value=o,e(m),m=document.querySelector("#question_2"),m.value=s,e(m),m=document.querySelector("#gbmessage"),m.value=a,e(m),m=document.querySelector("#networkmessage"),m.value=r,e(m),m=document.querySelector("#question_3"),m.value=l,e(m),m=document.querySelector("#question_4"),m.value=c,e(m),m=document.querySelector("#lowball_message"),m.value=d,e(m),m=document.querySelector("#offermessage"),m.value=u,e(m),m=document.querySelector("#meetupmessage"),m.value=p,e(m)}})).catch((e=>(console.error("Fetch Failed",e),(0,a.sleep)(1e4).then((()=>l())))))}function c(e){return new Promise((t=>{!function n(){if(e.parentNode.MaterialRadio||e.parentNode.MaterialSwitch)return t(e);setTimeout(n,30)}()}))}},425:(e,t,n)=>{"use strict";n.r(t),n.d(t,{retryDelayWithMessage:()=>r});var i=n(1203),o=n(3539),s=n(3177),a=n(4246);async function r(e){const t=60*(0,s.l)(i.botRetryDelay[0],i.botRetryDelay[1])*1e3,n=(new Date).getTime()+t;(0,o.CONSOLE_MESSAGE)("timeout",{message:e||"",hh:moment(n).format("HH"),mm:moment(n).format("mm"),ss:moment(n).format("ss")}),await(0,a.sleep)(t)}},9971:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var i=n(3372),o=n(4423),s=n(2572),a=n(7367);async function r(){unsafeWindow.isRun=1,(0,o.o)(!1),(await(0,a.stats)()).addRun(),async function e(){const t=(0,i.generateId)();unsafeWindow.runningInstanceId=t;try{await(0,s.start)(t)}catch(n){console.trace(),console.error("start Caught error!",t,n),setTimeout((()=>{e()}),6e4)}}()}},9688:(e,t,n)=>{"use strict";n.r(t),n.d(t,{searchListings:()=>c});var i=n(1203),o=n(3539),s=n(5703),a=n(8544),r=n(2287),l=n(4246);async function c({keyword:e,lat:t=7.79716,lon:n=122.763,radius:u=65,count:p=24,priceMin:m=0,priceMax:g=214748364700,cursor:_,previousResults:w}){console.log(JSON.stringify({keyword:e,lat:t,lon:n,radius:u,count:p,priceMin:m,priceMax:g,cursor:_,previousResults:w})),"string"==typeof u&&(u=parseInt(u,10));const h={buyLocation:{latitude:t,longitude:n},contextual_data:null,count:p,cursor:_,flashSaleEventID:"",hasFlashSaleEventID:!1,marketplaceSearchMetadataCardEnabled:!1,params:{bqf:{callsite:"COMMERCE_MKTPLACE_WWW",query:e},browse_request_params:{commerce_enable_local_pickup:!0,commerce_enable_shipping:!0,commerce_search_and_rp_available:!0,commerce_search_and_rp_category_id:[],commerce_search_and_rp_condition:null,commerce_search_and_rp_ctime_days:null,filter_location_latitude:t,filter_location_longitude:n,filter_price_lower_bound:`${Number(m)}00`,filter_price_upper_bound:`${Number(g)}00`,filter_radius_km:u},custom_request_params:{browse_context:null,contextual_filters:[],referral_code:null,saved_search_strid:null,search_vertical:"C2C",seo_url:null,surface:"SEARCH",virtual_contextual_filters:[]}},savedSearchID:null,savedSearchQuery:e,scale:2,shouldIncludePopularSearches:!1,topicPageParams:{location_id:"110301228992872",url:null}},f=(0,a.getFb_dtsg)(),y=(0,s.W)(),b={av:y,__user:y,__a:"1",__req:"1w",__hs:"19541.HYP:comet_pkg.2.1..2.1",dpr:"2",__ccg:"GOOD",__rev:"1007782503",__s:"r7e81o:lrt2ad:isoco8",__hsi:"7251558458098997704",__dyn:"7AzHJ16UW5Eb8ng5K8G6EjBWobVo66u2i5U4e2C17yUJ3odEnz8K2aewnof8boG0x8bo6u3y4o2Gwfi0LVEtwMw65xO2OU7m2210wEwgolzUO0-E4a3a4oaEnxO0Bo7O2l2Utwwwi831wiEjwZx-3m1mzXw8W58jwGzE8FU5e7oqBwJK2W5olwUwOzEjUlDw-wQK261eBx_y88E3qxWm2Sq2-azo7u3C223908O3216xi4UdUcojxK2B0oobo8oC1hxG1Fw",__csr:"g9Ahf9sGvRRfitNb4HbYZWGGrmxGNIjiq8IgkBbsPYJlWOQP4rEzKGRh6QYx6FlFyQHXAGRry-iBAXh27t6t4mVaigiAh9ULpfCGeVK-uqil4BVF68UZ2QAECeDVy-iaBVVbKWBUKm8iByUvKElhu46cyoybGbyomwxJ93Hz8pzoy4Q4e5aKazEDgK2S9AABx626mUThEap8pCxaqeAhUjyk5Z0zyESdwqqye8KmEKu5UnHwHx-1cKE4O2qUqgjzEqK364UvxO2e2W7U-1gxqVXx29DwZxiawnUcEjxO00BAE2Vg07KK031W2i0nO0yE2HU0obCg6m1Cx-0PQ0XA2-0hm1cwGw0GLqx500LThFU0_60f5x51i0pm0muOwmU-051A07rA04c86S0hEHDwgU1TQqjglwjA1FpU3oQ7iqh2a1HwNw44g2gwb60iTwd-0f9x90",__comet_req:"15",fb_dtsg:f,jazoest:"25327",lsd:"VSZVwWRyifaM82K_F8cOFc",__spin_r:"1007782503",__spin_b:"trunk",__spin_t:"1688385023",fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"CometMarketplaceSearchContentContainerQuery",variables:JSON.stringify(h),server_timestamps:"true",doc_id:"6555223147833946"};let x=await fetch("https://www.facebook.com/api/graphql/",{headers:{accept:"*/*","accept-language":"en-US,en;q=0.9","content-type":"application/x-www-form-urlencoded","sec-ch-prefers-color-scheme":"light","sec-ch-ua":'"Not.A/Brand";v="8", "Chromium";v="114", "Google Chrome";v="114"',"sec-ch-ua-full-version-list":'"Not.A/Brand";v="8.0.0.0", "Chromium";v="114.0.5735.198", "Google Chrome";v="114.0.5735.198"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"macOS"',"sec-ch-ua-platform-version":'"13.4.1"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","viewport-width":"1440","x-asbd-id":"129477","x-fb-friendly-name":"CometMarketplaceSearchContentContainerQuery","x-fb-lsd":"IudQ3V8x_C_Vv_XEg-5tyu"},referrer:"https://www.facebook.com/marketplace/110301228992872/search?query=rice",referrerPolicy:"strict-origin-when-cross-origin",body:d(b),method:"POST",mode:"cors",credentials:"include"}).then((async e=>(0,r.handleFetchErrors)(e))).then((e=>e.text()));if(x&&x.match(/api_error_code":368/i)){const s=(new Date).getTime()+60*i.waitIfSpamDetected*1e3,a=moment(s).calendar();return(0,o.CONSOLE_MESSAGE)("halted_soft",{schedule:a}),window.isKO=!0,await(0,l.sleep)(60*i.waitIfSpamDetected*1e3),window.isKO=!1,c({keyword:e,lat:t,lon:n,radius:u,count:p,priceMin:m,priceMax:g,cursor:_,previousResults:w})}if(x.includes("for (;;);")&&(x=x.replace("for (;;);","")),x.match(/}\s*{/)&&(x=x.split(/}\s*{/)[0]+"}"),x=JSON.parse(x),x.errorDescription)return console.error("An API request (searchListings) has failed with error",x.errorDescription),x;let v=x.data.marketplace_search.feed_units.edges.filter((e=>e.node.listing)).map((e=>{const t=e.node.listing;return{title:t.marketplace_listing_title,price:t.listing_price.formatted_amount,id:t.id,seller:t.marketplace_listing_seller}}));return w&&(v=[...w,...v]),v.length<i.listingsPerKeyword&&x.data.marketplace_search.feed_units.page_info.has_next_page?c({keyword:e,lat:t,lon:n,radius:u,count:p,priceMin:m,priceMax:g,cursor:x.data.marketplace_search.feed_units.page_info.end_cursor,previousResults:v}):v}function d(e){const t=[];for(let n in e)if(e.hasOwnProperty(n)){const i=encodeURIComponent(n),o=encodeURIComponent(e[n]);t.push(`${i}=${o}`)}return t.join("&")}},6849:(e,t,n)=>{"use strict";function i(e){return fetch("https://webhook.hopla.workers.dev?project=OfferUpBot",{method:"POST",body:JSON.stringify(e),mode:"no-cors"})}n.d(t,{Z:()=>i})},4423:(e,t,n)=>{"use strict";function i(e){e||window.viewermode?window.isViewMode=!0:(document.querySelector('#ta #menu a[href="#page2"]').click(),window.isViewMode=!1),window.viewermode&&(document.querySelector("#menu").style.display="none")}n.d(t,{o:()=>i})},7091:(e,t,n)=>{"use strict";function i(e){window.isKO||e.match&&(window.navigator.onLine||e.match(/offline/))&&(document.querySelector("#statustext").textContent=e)}n.r(t),n.d(t,{showLastConsoleLog:()=>i})},1023:(e,t,n)=>{"use strict";function i(e){let t=document.querySelector("#loadingoverlay");t?t.style.display=e?"flex":"none":function(e){const t=document.querySelector("#ta");t&&(t.insertAdjacentHTML("afterbegin",`<div id="loadingoverlay" style="display: ${e?"flex":"none"};" class='loading-one'>\n          <div class='loading-two'>\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"\n                  class='svg'>\n                  <circle r="80" cx="500" cy="90" class='circle-one' />\n                  <circle r="80" cx="500" cy="910" class='circle-one' />\n                  <circle r="80" cx="90" cy="500" class='circle-one' />\n                  <circle r="80" cx="910" cy="500" class='circle-one' />\n                  <circle r="80" cx="212" cy="212" class='circle-one' />\n                  <circle r="80" cx="788" cy="212" class='circle-one' />\n                  <circle r="80" cx="212" cy="788" class='circle-one' />\n                  <circle r="80" cx="788" cy="788" class='circle-one' />\n              </svg>\n          </div>\n          <span style="position: fixed; padding-top: 165px;">Loading. Please wait...</span>\n      </div>\n    `),document.head.insertAdjacentHTML("beforeend","<style>\n      /* Loading Overlay - START */\n      .loading-one {\n        box-sizing: border-box;\n        display: flex;\n        position: absolute;\n        flex-flow: column nowrap;\n        align-items: center;\n        justify-content: space-around;\n        background: rgba(255, 255, 255, 0.8);\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        z-index: 2147483647;\n      }\n\n      .loading-two {\n        order: 1;\n        box-sizing: border-box;\n        overflow: visible;\n        flex: 0 0 auto;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        animation-name: around;\n        animation-duration: 2000ms;\n        animation-timing-function: linear;\n        animation-iteration-count: infinite;\n        width: 120px;\n        height: 120px;\n      }\n\n      .circle-one {\n        fill: var(--black);\n      }\n\n      .svg {\n        width: 100%;\n        height: 100%;\n        fill: var(--black);\n      }\n\n      @keyframes around {\n        0% {\n          transform: rotate(0deg)\n        }\n\n        100% {\n          transform: rotate(360deg)\n        }\n      }\n\n      /* Loading Overlay - END */\n    </style>"))}(e)}n.r(t),n.d(t,{showLoading:()=>i})},8521:(e,t,n)=>{"use strict";n.r(t),n.d(t,{skips:()=>g});var i=n(1334),o=n(1203),s=n(13),a=n(6901),r=n(9237),l=n(3539),c=(n(9105),n(5639)),d=n(2287),u=n(4246),p=n(1060),m=n(4484);function g(){async function e(e,t,n){let i=`https://us-central1-trade-apples.cloudfunctions.net/facebookbot?batch=1&listname=${e}`;n&&(i+=`&localcheck=${window.taPartnerId}`);return await async function e(n){return fetch(i,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((async e=>(0,d.handleFetchErrors)(e))).then((e=>e.text())).catch((async t=>(console.error("Fetch Failed (saveIdToLogBatch)",t,n),n&&n>6?"":(await(0,u.sleep)(1e4),n||(n=0),e(n+=1)))))}().then((n=>{try{const i=JSON.parse(n);if(!i.success||"added"!==i.success)return(0,m._apiSendBug)({error:"Failed to copy ids from storage to db",listname:e,aIds:t,response:n})}catch(i){return(0,m._apiSendBug)({error:"Failed copy ids from storage to db",listname:e,aIds:t,response:n})}}))}async function t(e,t,n){let i=`https://us-central1-trade-apples.cloudfunctions.net/facebookbot?listname=${e}&id=${t}&email=${window.taEmail}`;n&&(i+=`&localcheck=${window.taPartnerId}`);return await async function e(t){return fetch(i,{method:"POST"}).then((async e=>(0,d.handleFetchErrors)(e))).then((e=>e.text())).catch((async n=>(console.error("Fetch Failed (saveIdToLog)",n,t),t&&t>6?"":(await(0,u.sleep)(1e4),t||(t=0),e(t+=1)))))}().then((n=>{try{const i=JSON.parse(n);if(!i.success||"added"!==i.success)return(0,m._apiSendBug)({error:"Failed to save to log",listname:e,id:t,response:n})}catch(i){return(0,m._apiSendBug)({error:"Failed to save to log",listname:e,id:t,response:n})}}))}async function n(t,n){let o=await(0,i.gI)(t);o&&(o=JSON.parse(o),o&&Array.isArray(o)&&o.length&&(await e(n,o),await(0,i.Q5)(t,"[]")))}async function _(e,t,n,i,o){let s=`https://us-central1-trade-apples.cloudfunctions.net/facebookbot?isexist=${t}&listname=${e}`;n&&(s+="&noexpiry=1"),o&&(s+=`&expiryInDays=${o}`),i&&(s+=`&localcheck=${window.taPartnerId}`);return await async function e(t){return fetch(s).then((async e=>(0,d.handleFetchErrors)(e))).then((e=>e.text())).catch((async n=>(console.error("Fetch Failed (isIdInLog)",n,t),t&&t>6?"":(await(0,u.sleep)(1e4),t||(t=0),e(t+=1)))))}().then((n=>{try{const i=JSON.parse(n);return"success"in i?i.success:((0,m._apiSendBug)({error:"Failed to check logs",listname:e,id:t,response:n}),!1)}catch(i){return(0,m._apiSendBug)({error:"Failed to check logs",listname:e,id:t,response:n}),!1}}))}return{saveToPartnerMessaged:e=>t("partnermessage",e),saveToMessagedUsers:e=>t("users",e,!0),saveToSkipListing:e=>{let n="listings";return"single"===document.querySelector("[name=bot_mode]:checked").value||(n="listings_multi"),t(n,e,!0)},saveToSkipListingBatch:t=>{let n="listings";"single"===document.querySelector("[name=bot_mode]:checked").value||(n="listings_multi"),e(n,t,!0)},isSkipListing:async e=>{let t="listings";return"single"===document.querySelector("[name=bot_mode]:checked").value||(t="listings_multi"),await n("skip_listings",t),_(t,e,!0,!0)},getOtherIphoneListings:async function(e,t,n,i){if(!t){const n=await(0,s.fetchListingDetails)({id:e});if(n.error){if(console.error("Failed to get listing details.",n.error),"rate_limit_exceeded"===n.error_code){const e=(new Date).getTime()+60*o.waitIfSpamDetected*1e3,t=moment(e).calendar();(0,l.CONSOLE_MESSAGE)("halted_soft",{schedule:t}),window.isKO=!0,await(0,u.sleep)(60*o.waitIfSpamDetected*1e3),window.isKO=!1}return}if(!n||!n.owner)return void(0,m._apiSendBug)({error:"getOtherIphoneListings failed. No listing owner returned."});t=n.owner.id}const d=[];(0,l.CONSOLE_MESSAGE)("custom",`Fetching other listings of ${n} (${t})`);const _=await(0,c.getUserListings)(t,!0),w=document.querySelector("#ta #keywords").value.split(",").map((e=>e.trim())).join("|");for(const t of _)if(t.id!==e&&t.id!==e&&t.title){const e=t.title,n=t.description,i=t.creationTime,o=Number(t.price),s=new RegExp(w,"i");if(i){const e=document.getElementById("listing_max_age");if(e){const n=e.value,o=(0,r.f)(i);if(o>n){console.log("SKIPPED OLD LISTING.",o,"days old"),(0,l.CONSOLE_MESSAGE)("skip_old_listing",{age:o,listing_id:t.id,listing_name:t.title});continue}}}if(await g().isSkipListing(t.id))continue;if(!e.match(s))continue;let c=await(0,p.$)(e);if(!c&&n&&(c=await(0,p.P)(n)),c)continue;if(!(0,a.isPriceInRange)(o)){console.log("price not in range",o);continue}d.push(t.id)}return[...new Set(d)]},isSkipMessagedUser:async e=>(await n("skip_messagedusers","users"),_("users",e,"",!0,document.getElementById("ownerskipexpiry").value||"")),isSkipPartnerMessage:async e=>(await n("skip_partnermessaged","partnermessage"),_("partnermessage",e,!0))}}},4246:(e,t,n)=>{"use strict";function i(e){return new Promise((t=>setTimeout(t,e)))}n.r(t),n.d(t,{sleep:()=>i})},2572:(e,t,n)=>{"use strict";function i(){if(Array.from(document.querySelectorAll("button")).find((e=>"Log in"===e.textContent))&&(alert("You are not logged in! You have to login to offerup first."),1))return!1;let e=document.querySelector("#runfrom").value,t=document.querySelector("#rununtil").value;if(t&&e){e=e.split(":"),t=t.split(":");const n=new Date,i=new Date;i.setHours(e[0],e[1]);const o=new Date;return o.setHours(t[0],t[1]),i>o&&o.setDate(o.getDate()+1),n>=i&&n<=o}return alert("No schedule set! Bot will not run."),!1}n.r(t),n.d(t,{start:()=>v});var o=n(1203),s=n(3539),a=n(5836),r=n(1334);async function l(){let e=await(0,r.gI)("tsSpamDetected");if(e){e=parseInt(e,10);const t=(new Date).getTime();if(t<e)return e-t}return!1}var c=n(4219),d=n(1463),u=n(9160),p=n(4423);function m(){document.querySelector("#switch-rununtil").parentElement.MaterialSwitch?((0,p.o)(!0),document.querySelector("#switch-rununtil").parentElement.MaterialSwitch.off(),(0,r.Q5)("input_switch-rununtil",!1),(0,r.aD)("lastKwIdx")):setTimeout((()=>{m()}),2e3)}var g=n(7091),_=n(4246),w=n(7121),h=n(3443),f=n(7367);function y(e){window.isWaitingForSchedule?(0,s.CONSOLE_MESSAGE)("halted_schedule"):(window.isWaitingForSchedule=!0,document.getElementById("switch-rununtil").checked?((0,s.CONSOLE_MESSAGE)("halted_schedule"),i()?(window.isWaitingForSchedule=!1,unsafeWindow.isRun=1,(0,f.stats)().then((e=>e.resetCurrentStreak())),(0,f.stats)().then((e=>e.addRun())),v(e)):setTimeout((()=>{window.isWaitingForSchedule=!1,y(e)}),5e3)):window.isWaitingForSchedule=!1)}var b=n(3177),x=n(7480);async function v(e){if(window.viewermode)return void(0,g.showLastConsoleLog)("Tab is in viewer mode.");(0,w.X)(!1);const t=setInterval((()=>{i()||(unsafeWindow.isRun=0,(0,s.CONSOLE_MESSAGE)("halted_schedule"),clearInterval(t),(0,w.X)(!0),y(e))}),1e4);if(!i())return clearInterval(t),(0,w.X)(!0),void y(e);if(o.showAlerts&&alert("start"),!(0,h.t)())return m(),void(0,w.X)(!0);if((0,c.loadStats)(),await l()){const e=await l(),t=(new Date).getTime()+e,n=moment(t).calendar();(0,s.CONSOLE_MESSAGE)("halted_soft",{schedule:n}),await(0,_.sleep)(e)}const{keyword:n,error:r}=await(0,a.getKeyword)();if(r)return void console.error(r);console.log("Searching",n);const p=await(0,x.readCoordinates)();for(let t=1;t<40;){if(!unsafeWindow.isRun){console.log("Bot stopped.");break}if(e!==unsafeWindow.runningInstanceId)return;await(0,d.maxConvoCheck)(e);const t=await(0,u.processKeyword)(n,e,p);if("no more results"===t){const t=(0,b.l)(1,5),n=(new Date).getTime()+60*t*1e3;return(0,s.CONSOLE_MESSAGE)("timeout",{message:"No listings left..",hh:moment(n).format("HH"),mm:moment(n).format("mm"),ss:moment(n).format("ss")}),await(0,_.sleep)(60*t*1e3),void v(e)}if("listingsPerKeyword reached."===t){const t=(0,b.l)(1,5),n=(new Date).getTime()+60*t*1e3;return(0,s.CONSOLE_MESSAGE)("timeout",{message:"Listings per keyword has been reached. Starting a new search.",hh:moment(n).format("HH"),mm:moment(n).format("mm"),ss:moment(n).format("ss")}),await(0,_.sleep)(60*t*1e3),void v(e)}if("not-allowed"===t)return void(0,s.CONSOLE_MESSAGE)("custom","You are not allowed to use this bot.");if(window.messagesSent>1&&window.messagesSent%20==0){const e=(new Date).getTime()+60*o.delayPerXMessages*1e3;(0,s.CONSOLE_MESSAGE)("timeout",{message:"20 messages has been sent",hh:moment(e).format("HH"),mm:moment(e).format("mm"),ss:moment(e).format("ss")}),await(0,_.sleep)(60*o.delayPerXMessages*1e3)}}}},7367:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getStats:()=>r,stats:()=>a});var i=n(1334),o=n(9171),s=n(4484);async function a(){const e=new Date,t=`${e.getFullYear()}${e.getMonth()+1}${e.getDate()}`;let n=await(0,i.gI)(`stats_${t}`);function s(){return(0,i.Q5)(`stats_${t}`,JSON.stringify(n))}return n=n?JSON.parse(n):{},{addOffer:()=>{const e="offers";n[e]||(n[e]=0),n[e]+=1,s(),document.getElementById("stat_offers").textContent=n[e],(0,o._)({offers:n[e]})},addPartner:()=>{const e="partners";n[e]||(n[e]=0),n[e]+=1,s(),document.getElementById(`stat_${e}`).textContent=n[e],(0,o._)({partners:n[e]})},addRun:()=>{n.runs||(n.runs=0),n.runs+=1,s(),document.getElementById("stat_runs").textContent=n.runs,(0,o._)({runs:n.runs})},addStreak:()=>{window.iStreaks+=1,document.getElementById("stat_streaks").textContent=window.iStreaks,(0,o._)({streaks:window.iStreaks})},addKo:()=>{n.ko||(n.ko=0),n.ko+=1,s(),document.getElementById("stat_ko").textContent=n.ko,(0,o._)({KO:n.ko})},resetCurrentStreak:()=>{window.iStreaks=0,document.getElementById("stat_streaks").textContent=window.iStreaks,(0,o._)({streaks:0})},addTotalListingsScraped:e=>{const t="listings_scraped_ids",i=e.map((e=>e.id));n[t]||(n[t]=[]);const a=[...new Set(n[t].concat(i))];n[t]=a;const r="scraped";n[r]=a.length,s(),document.getElementById(`stat_${r}`).textContent=a.length,(0,o._)({listings_scraped:a.length})},setThreadsCount:e=>{const t="num_threads";n[t]=e,s(),(0,o._)({num_threads:n[t]})},addNewListings:()=>{const e="new_listings";n[e]||(n[e]=0),n[e]+=1,s(),document.getElementById(`stat_${e}`).textContent=n[e],(0,o._)({new_listings:n[e]})},addSingleListings:()=>{const e="single_listings";n[e]||(n[e]=0),n[e]+=1,s(),document.getElementById(`stat_${e}`).textContent=n[e],(0,o._)({single_listings:n[e]})},addMultiListings:()=>{const e="multi_listings";n[e]||(n[e]=0),n[e]+=1,s(),document.getElementById(`stat_${e}`).textContent=n[e],(0,o._)({multi_listings:n[e]})}}}async function r(){try{const e={},t=new Date,n=`${t.getFullYear()}${t.getMonth()+1}${t.getDate()}`;let o=await(0,i.gI)(`stats_${n}`);if(o){const t=["offers","partners","runs","streaks","ko"];o=JSON.parse(o),t.forEach((t=>{e[t]=o[t]||0}))}return e}catch(e){console.error(e),(0,s._apiSendBug)({error:"Failed to get stats",details:e.toString()})}}},8329:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var i=n(1334);const o=n(6503);function s(e){return{openermessage:(async()=>{const t=await(0,i.gI)("input_openermessage")||"";return e?t:o.unspin(t)})(),question_1:(async()=>{const t=await(0,i.gI)("input_question_1")||"";return e?t:o.unspin(t)})(),question_2:(async()=>{const t=await(0,i.gI)("input_question_2")||"";return e?t:o.unspin(t)})(),gbMessage:(async()=>{const t=await(0,i.gI)("input_gbmessage")||"";return e?t:o.unspin(t)})(),networkMessage:(async()=>{const t=await(0,i.gI)("input_networkmessage")||"";return e?t:o.unspin(t)})(),question_3:(async()=>{const t=await(0,i.gI)("input_question_3")||"";return e?t:o.unspin(t)})(),question_4:(async()=>{const t=await(0,i.gI)("input_question_4")||"";return e?t:o.unspin(t)})(),lowball_message:(async()=>{const t=await(0,i.gI)("input_lowball_message")||"";return e?t:o.unspin(t)})(),offerMessage:(async()=>{const t=await(0,i.gI)("input_offermessage")||"";return e?t:o.unspin(t)})(),meetupMessage:(async()=>{const t=await(0,i.gI)("input_meetupmessage")||"";return e?t:o.unspin(t)})()}}},803:(e,t,n)=>{"use strict";n.r(t),n.d(t,{testTemplates:()=>a});var i=n(9107),o=n(8329),s=n(3443);async function a(){const e=[];if(!(0,s.t)())return;const t=(0,o.z)(),n=Object.keys(t);for(const o of n){let n=await t[o];if(console.log("msg",n),!n)continue;const s={model:"IPHONE 14 PRO",storage:"256GB",network:"Unlocked",price:576,condition:"Grade A - New",deductions:[]};try{n=(0,i.e)(n,s,"Silver",600)}catch(e){console.trace(),console.error(e)}n=`${o}: ${n}\n\n`,console.log("msg2",n),e.push(n)}alert(e.join(""))}},1060:(e,t,n)=>{"use strict";n.d(t,{$:()=>o,P:()=>s});var i=n(1334);async function o(e){const t=await(0,i.gI)("input_skipwords_title");if(t){let n=!1;if(t.split(",").map((e=>e.trim())).forEach((t=>{t&&e&&e.match(new RegExp(t,"i"))&&(n=t)})),n)return n}}async function s(e){const t=await(0,i.gI)("input_skipwords_description");if(t){let n=!1;if(t.split(",").map((e=>e.trim())).forEach((t=>{t&&e&&e.match(new RegExp(t,"i"))&&(n=t)})),n)return n}}},7121:(e,t,n)=>{"use strict";function i(e){const t=["#keywords","#skipwords_title","#skipwords_description","#openermessage","#offermessage","#acceptmessage","#meetupmessage","#question_1","#question_2","#question_3","#question_4"];for(const n of t){let t=document.querySelector(n);t&&(t.disabled=!e,t.style.opacity=e?"1":"0.8")}}n.d(t,{X:()=>i})},5078:(e,t,n)=>{"use strict";function i(e,t,n){var i=e.indexOf(t)+t.length;if(i<t.length)return"";var o=e.substring(i),s=o.indexOf(n);if(-1===s)throw Error("Could not find endTime `"+n+"` in the given string.");return o.substring(0,s)}n.r(t),n.d(t,{getFrom:()=>i})},3443:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var i=n(3539),o=n(8329);const s=n(6503);function a(){const e=[];return Object.keys((0,o.z)()).forEach((async t=>{const n=await(0,o.z)(!0)[t];s.validate(n)||e.push(t)})),!e.length||((0,i.CONSOLE_MESSAGE)("custom","Invalid spintax detected."),alert("You have invalid spintax format in "+e.join(", ")),!1)}},3624:(e,t,n)=>{"use strict";function i(e){return new Promise((t=>{!function n(){if(e.parentNode.MaterialRadio||e.parentNode.MaterialSwitch)return t(e);setTimeout(n,30)}()}))}n.d(t,{B:()=>i})},9171:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var i=n(2617),o=n(1334);function s(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}async function a({offers:e,partners:t,runs:n,streaks:a,KO:r,listings_scraped:l,num_threads:c,new_listings:d,single_listings:u,multi_listings:p}){if(!window.taEmail)return;const m=document.getElementById("roundupdown").value,g=document.getElementById("streaktimeout").value,_=document.getElementById("streak").value,w=document.querySelector("#switch-deleteaftersend").checked,h=document.querySelector("#skipwords_title").value,f=document.querySelector("#skipwords_description").value,y=document.querySelector("#ta #keywords").value,b=document.getElementById("maxconcurrentconversations").value,x=document.querySelector("#runfrom").value,v=document.querySelector("#rununtil").value,S=function(){const e=new Date;let t=e.getMonth()+1;t<10&&(t=`0${t}`);let n=e.getDate();return n<10&&(n=`0${n}`),`${e.getFullYear()}-${t}-${n}`}(),k=(0,i.g)()||window.taEmail,E=document.querySelector("#listing_min_price").value,L=document.querySelector("#listing_max_price").value,O={key:k,partner_email:window.taEmail,date:S,version:window.extension_version};void 0!==e&&(O.offers=e),void 0!==t&&(O.partners=t),void 0!==n&&(O.runs=n),void 0!==a&&(O.streaks=a),void 0!==r&&(O.KO=r),void 0!==x&&(O["run from"]=x),void 0!==v&&(O.until=v),void 0!==m&&(O["offer add/deduct"]=m),void 0!==_&&(O["max streak"]=_),void 0!==g&&(O.timeout=g),void 0!==l&&(O.listings_scraped=l),void 0!==b&&(O["max concurrent"]=b),void 0!==w&&(O["delete after sending"]=w),void 0!==h&&(O.skipwords_title=h),void 0!==f&&(O.skipwords_description=f),void 0!==y&&(O.keywords=y),void 0!==c&&(O["threads inbox"]=c),void 0!==d&&(O["New Listings"]=d),void 0!==u&&(O["Single Listings"]=u),void 0!==p&&(O["Multi Listings"]=p),void 0!==E&&(O["Price Min"]=E),void 0!==L&&(O["Price Max"]=L),async function(){const e=(new Date).getTime();let t=await(0,o.gI)("runtimeHits");if(t){t=JSON.parse(t);const i=t[t.length-1];n=i,Date.now()-n>=6e5&&(t.push(e),e-i<12e5&&async function(){const e=s();let t=await(0,o.gI)("runTimePerDay");t?(t=JSON.parse(t),t[e]||(t={},t[e]=0),t[e]=parseInt(t[e])+1):t={[e]:1},(0,o.Q5)("runTimePerDay",JSON.stringify(t))}())}else t=[],t.push(e);var n;(0,o.Q5)("runtimeHits",JSON.stringify(t))}(),O.runtime_points=await async function(){let e=await(0,o.gI)("runTimePerDay");if(e){const t=s();return e=JSON.parse(e),e[t]?e[t]:0}return 0}(),window.writeQueue||(window.writeQueue=[]),window.writeQueue.push(O)}},6503:(e,t,n)=>{e.exports=n(9819)},9819:(e,t)=>{!function(e){e.isSpintax=function(e){return null!==e.match(/\{[^}]*\|*[^}]*\}/)},e.findSpintax=function(e){return e.match(/\{([^{}]+?)\}/)},e.unspin=function(t,n){for(var i,o,s,a=t,r=0;e.isSpintax(t);){if(r>=1e3)throw new Error("Unable unspin text after 1000 iterations ("+a+")");s=(o=(i=e.findSpintax(t))[1].split("|"))[Math.floor((n||Math.random)()*o.length)],t=t.replace(i[0],s),r++}return t},e.count=function(t){for(var n,i,o,s,a,r=0,l=/%%%\d+%%%/g,c=/%%%(\d+)%%%/,d=t,u=0;e.isSpintax(t);){if(u>=1e3)throw new Error("Unable unspin text after 1000 iterations ("+d+")");for(i=(n=e.findSpintax(t))[1].split("|"),o=0,a=0;a<i.length;a++)i[a].match(l)?o+=parseInt(i[a].match(c)[1])||1:o+=1;t=t.replace(n[0],"%%%N%%%".replace("N",o.toString())),u++}if(t.match(l))for(s=t.match(l),r=1,a=0;a<s.length;a++)r*=parseInt(s[a].match(c)[1])||1;return r},e.validate=function(t){return null===(t=e.unspin(t)).match(/(\{[^}]*\|)|(\|[^{]*\})/)}}(t)},9178:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});const i=e=>e?e=(e=e.replace(/\[.+?\]/,"")).trim():""},127:(e,t)=>{t.viewModeCheck=function(){window.location.href.match("/inbox|inbox/message")&&(window.viewermode=!0)}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"facebook-marketplace-bot","version":"1.0.265","description":"","main":"contentscript.js","dependencies":{"acorn":"^8.8.1","graceful-fs":"^4.2.10","javascript-obfuscator":"^4.0.0","mel-spintax":"^1.0.4","path":"^0.12.7","webpack-cli":"^4.9.2"},"scripts":{"build":"npm run version_update && webpack && npm run show_version","debug":"node debugger.js","test":"echo \\"Error: no test specified\\" && exit 1","version_update":"npm version patch --no-git-tag-version","deploy-traderonly":"surge dist/","show_version":"npm -s run env echo \'$npm_package_version\'"},"repository":{"type":"git","url":"git+ssh://git@bitbucket.org/hopla-tools/offerupbot.git"},"author":"Silver Serate","license":"ISC","homepage":"https://bitbucket.org/hopla-tools/offerupbot#readme","devDependencies":{"source-map":"^0.7.4","webpack":"^5.74.0","webpack-obfuscator":"^3.5.1"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{if(window.isAlreadyInjected)throw new Error("Marketplace Bot is already injected to this page.");window.isAlreadyInjected=!0;const{addAllUserListingsToSkipList:e}=__webpack_require__(9088),{attachEvents:t}=__webpack_require__(1284),{showAlerts:n}=__webpack_require__(1203),{generateId:i}=__webpack_require__(3372),{getConsoleMessages:o,CONSOLE_MESSAGE:s}=__webpack_require__(3539),{getPartnerDetails:a}=__webpack_require__(8414),{getQuote:r}=__webpack_require__(2320),{getVariant:l}=__webpack_require__(1439),{default:c}=__webpack_require__(3119),{handleFetchErrors:d}=__webpack_require__(2287),{injectHoplaLogin:u}=__webpack_require__(6722),{injectLogger:p}=__webpack_require__(7731),{injectMdl:m}=__webpack_require__(4559),{injectMoment:g}=__webpack_require__(3695),{injectStyle:_}=__webpack_require__(5729),{injectTrackjs:w}=__webpack_require__(5658),{insertUI:h}=__webpack_require__(642),{isInjectedToOtherTab:f}=__webpack_require__(5779),{loadInputs:y}=__webpack_require__(5038),{loadStats:b}=__webpack_require__(4219),{logout:x}=__webpack_require__(1992),{onSessionReady:v,login_callback:S}=__webpack_require__(147),{prefix:k}=__webpack_require__(7850),{processKeyword:E}=__webpack_require__(9160),{processWriteQueue:L}=__webpack_require__(4053),{restoreDefaults:O}=__webpack_require__(1063),{retryDelayWithMessage:M}=__webpack_require__(425),{showLoading:I}=__webpack_require__(1023),{skips:A}=__webpack_require__(8521),{sleep:q}=__webpack_require__(4246),{start:C}=__webpack_require__(2572),{stats:j}=__webpack_require__(7367),{testTemplates:T}=__webpack_require__(803),{_apiSendBug:D}=__webpack_require__(4484),{viewModeCheck:P}=__webpack_require__(127),{version:N}=__webpack_require__(4147),{searchListings:F}=__webpack_require__(9688),{fetchListingDetails:U}=__webpack_require__(13),{api_sendMessage:H}=__webpack_require__(4087),{fetchInboxThreads:G}=__webpack_require__(3542),{maxConvoCheck:B}=__webpack_require__(1463),{getKeyword:$}=__webpack_require__(5836),{changeArchivedStatus:K}=__webpack_require__(175),{getUserListings:W}=__webpack_require__(5639),{readCoordinates:R}=__webpack_require__(7480),{archiveAllThreads:z}=__webpack_require__(2e3),{getFrom:V}=__webpack_require__(5078),{getFb_dtsg:Q}=__webpack_require__(8544),{filterOutListingsNotInPriceRange:J}=__webpack_require__(6901);window.sleep=q,(async()=>{window.extension_version=N,window.messagesSent=0,window.iStreaks=0,unsafeWindow.isRun=0,window.isViewMode=!0,window.tabId=Math.round(1e4*Math.random()),window.textMatchIndex={},window.isEnterprise=!1,window.bugReport={},window.isKO=!1,window.debug=!1,window.storeFirebaseLog=async function(e,t){return async function n(i){return fetch("https://us-central1-trade-apples.cloudfunctions.net/sendlog",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({logType:"Facebook Marketplace",ts:t||"",log:e})}).then((async e=>d(e))).then((e=>e.text())).catch((async e=>(console.error("Fetch Failed (storeFirebaseLog)",e,i),i&&i>6?"":(await q(1e4),i||(i=0),n(i+=1)))))}().catch((e=>(console.error("Fetch Failed (storeFirebaseLog)",e),"")))},window.testTemplates=T,unsafeWindow.restoreDefaults=O,window.prefix=k,unsafeWindow.skips=A,window.processKeyword=E,window.addAllUserListingsToSkipList=e,window.CONSOLE_MESSAGE=s,window.getConsoleMessages=o,window.getVariant=l,window.getQuote=r,window.showLoading=I,window.login_callback=S,window.getPartnerDetails=a,window.hopla_logout=x;let c=!1;if(await f())return console.error("Facebook Marketplace Bot is already inject in another tab."),void alert("Facebook Marketplace Bot is already inject in another tab.");window.api_sendMessage=H,window.searchListings=F,unsafeWindow.searchListings=F,unsafeWindow.fetchListingDetails=U,unsafeWindow.getUserListings=W,unsafeWindow.fetchInboxThreads=G,unsafeWindow.maxConvoCheck=B,unsafeWindow.readCoordinates=R,window.getKeyword=$,unsafeWindow.changeArchivedStatus=K,unsafeWindow.archiveAllThreads=z,unsafeWindow.getFrom=V,unsafeWindow.getFb_dtsg=Q,unsafeWindow.filterOutListingsNotInPriceRange=J,console.log(`Marketplace Bot Version ${window.extension_version}`);try{!function(){"use strict";let e=!1;n&&alert("Facebook Marketplace Bot has been injected!"),window.addEventListener("online",(()=>{c=!1,console.log("You are back online!"),setTimeout((()=>{document.querySelector("#statustext"),console.log("Will restart bot.");const e=i();unsafeWindow.runningInstanceId=e,C(e)}),1e4)})),window.addEventListener("offline",(async()=>{for(c=!0,console.log("You are offline.");c;)await a(1e3)}));try{s()}catch(e){console.error("Bot crashed. offline",e),D({error:"Found error in the bot.",info:e.toString()})}async function s(){_(),w(),o(),h(),I(!0),u(v),m(),y(),b(),t(),L(),window.isAllowed&&(e=!0)}function a(e){return new Promise((t=>setTimeout(t,e)))}window.main=s,window.start=C,window.loadInputs=y,console.log("Facebook Marketplace Bot is ready!")}()}catch(e){console.trace(),console.error("caught error",e),console.log("Caught error. Will restart bot."),D({error:"Found error in the bot.",info:e.toString()})}})()})()})();
//# sourceMappingURL=bundle.js.map

})();